{"version":3,"sources":["../../../../../../../../../../../Documents/Antlijefri/spurtcommerce/b2c/spurt_community/5.3/spurtcommerce-v5-storefront/src/Components/TopCategories/index.jsx"],"sourcesContent":["\"use client\";\n\n// React and Next\nimport Link from \"next/link\";\nimport { useRef, useState } from \"react\";\n\n// Utils\nimport { sortCategories } from \"@/utilities/globalFunctions\";\nimport { Cookiescategory } from \"@/utilities/cookies\";\n\n//Redux\nimport { useDispatch } from \"react-redux\";\nimport {\n  breadcrumallcategory,\n  breadcrumb,\n  categoryname,\n  productslug,\n  subproduct,\n} from \"@/redux/slices/userSlice\";\n\nexport default function TopCategory({ topCategories }) {\n  const dispatch = useDispatch();\n  const sortedTopCategories = sortCategories(topCategories);\n\n  const containerRef = useRef(null);\n  const [underlineStyle, setUnderlineStyle] = useState({ left: 0, width: 0 });\n  const [subCategoryData, setSubCategoryData] = useState();\n\n  const handleHover = (e, data) => {\n    setSubCategoryData(data);\n    const link = e.currentTarget;\n    const container = containerRef.current;\n    const linkRect = link.getBoundingClientRect();\n    const containerRect = container.getBoundingClientRect();\n\n    const left = linkRect.left - containerRect.left + container.scrollLeft; // â† this fixes it\n    const width = link.offsetWidth;\n\n    setUnderlineStyle({ left, width });\n  };\n\n  const handleCategoryNames = (name, slug) => {\n    dispatch(categoryname(name));\n    dispatch(breadcrumb(false));\n    dispatch(productslug(slug));\n    dispatch(breadcrumallcategory(false));\n    dispatch(subproduct(false));\n    Cookiescategory(name);\n  };\n  const scrollVelocityRef = useRef(0);\n  const animationFrameRef = useRef(null);\n\n  const smoothScroll = () => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    container.scrollLeft += scrollVelocityRef.current;\n    scrollVelocityRef.current *= 0.85; // friction\n\n    if (Math.abs(scrollVelocityRef.current) > 0.5) {\n      animationFrameRef.current = requestAnimationFrame(smoothScroll);\n    }\n  };\n\n  const handleWheel = (e) => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    // momentum scrolling\n    scrollVelocityRef.current += e.deltaY * 0.3;\n\n    cancelAnimationFrame(animationFrameRef.current);\n    animationFrameRef.current = requestAnimationFrame(smoothScroll);\n  };\n\n  return (\n    <div className=\"sticky top-[81px] z-50 hidden border-b border-solid border-[#EEEFF1] bg-white lg:block\">\n      <div className=\"group relative mx-auto max-w-screen-2xl px-4\">\n        <div\n          ref={containerRef}\n          className=\"scrollbar-hidden group relative flex max-h-[49px] gap-x-4 overflow-auto\"\n          onWheel={handleWheel}\n          style={{ overscrollBehavior: \"contain\" }} // stops body scroll on wheel\n        >\n          {sortedTopCategories?.map((data, index) => (\n            <Link\n              prefetch={false}\n              key={index}\n              href={`/product/${data?.categorySlug}`}\n              className=\"relative flex items-center space-x-2 whitespace-nowrap py-4 text-sm font-normal capitalize leading-4 tracking-wider text-[#333333] transition-all hover:font-[500] hover:text-[#047600] dark:text-white\"\n              onClick={() =>\n                handleCategoryNames(data?.name, data?.categorySlug)\n              }\n              onMouseEnter={(e) => handleHover(e, data)}\n            >\n              {data?.categoryNameTrans ? data?.categoryNameTrans : data?.name}\n            </Link>\n          ))}\n          {/* Moving underline */}\n          <span\n            className=\"absolute bottom-0 !ml-0 hidden h-[3px] bg-[#047600] transition-all duration-300 group-hover:block\"\n            style={{\n              left: underlineStyle.left,\n              width: underlineStyle.width,\n            }}\n          />\n        </div>\n\n        <div className=\"invisible absolute left-0 top-full z-50 mt-[1px] max-h-[60vh] w-full bg-transparent px-4 opacity-0 transition-all duration-200 group-hover:visible group-hover:opacity-100\">\n          <div className=\"mx-auto max-w-screen-2xl overflow-auto bg-white shadow-[0px_2px_4px_#00000014]\">\n            <div className=\"flex bg-white\">\n              {subCategoryData &&\n                subCategoryData?.children &&\n                subCategoryData?.children?.map((subCategory, index) => (\n                  <div\n                    key={index}\n                    className=\"w-max min-w-[150px] bg-white p-[24px] [&:nth-child(even)]:bg-[#F9F9FC]\"\n                  >\n                    <h3 className=\"mb-[24px] text-sm font-semibold leading-[17px] text-[#047600] hover:underline\">\n                      <Link\n                        className=\"capitalize\"\n                        prefetch={false}\n                        href={`/product/${subCategory?.categorySlug}`}\n                        onClick={() =>\n                          handleCategoryNames(\n                            subCategory?.name,\n                            subCategory?.categorySlug,\n                          )\n                        }\n                      >\n                        {subCategory?.categoryNameTrans\n                          ? subCategory?.categoryNameTrans\n                              .charAt(0)\n                              .toUpperCase() +\n                            subCategory?.categoryNameTrans\n                              .slice(1)\n                              .toLowerCase()\n                          : subCategory?.name.charAt(0).toUpperCase() +\n                            subCategory?.name.slice(1).toLowerCase()}\n                      </Link>\n                    </h3>\n                    <div className=\"block\">\n                      {subCategory &&\n                        subCategory?.children &&\n                        subCategory?.children?.map(\n                          (subCategoryChild, index) => (\n                            <Link\n                              prefetch={false}\n                              key={index}\n                              href={`/product/${subCategoryChild?.categorySlug}`}\n                              onClick={() =>\n                                handleCategoryNames(\n                                  subCategoryChild?.name,\n                                  subCategoryChild?.categorySlug,\n                                )\n                              }\n                              className=\"mb-[12px] mt-0 block text-[14px] font-normal capitalize leading-[17px] text-[#333333] last-of-type:mb-0 hover:underline\"\n                            >\n                              {subCategoryChild?.categoryNameTrans\n                                ? subCategoryChild?.categoryNameTrans\n                                    .charAt(0)\n                                    .toUpperCase() +\n                                  subCategoryChild?.categoryNameTrans\n                                    .slice(1)\n                                    .toLowerCase()\n                                : subCategoryChild?.name\n                                    .charAt(0)\n                                    .toUpperCase() +\n                                  subCategoryChild?.name.slice(1).toLowerCase()}\n                            </Link>\n                          ),\n                        )}\n                    </div>\n                  </div>\n                ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}