"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[4187],{64187:(D,M,c)=>{c.r(M),c.d(M,{AccessPermissionModule:()=>$});var g=c(60177),h=c(51188),m=c(79176),t=c(54438),x=c(35697),u=c(41780);const P=()=>["/settings/access-and-permission/role/list"],O=()=>["/settings/access-and-permission/user/list"];let _=(()=>{class i{constructor(){}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-access-layout"]],decls:22,vars:18,consts:[[1,"setup-wrapper"],[1,"setup-container","localization-container"],[1,"loc-lay-title"],[1,"page-title"],[1,"text14"],[1,"card","ap-general","ap-info","set-loc-card"],[1,"nav-tabs","nav"],[1,"nav-item"],["appShowHide","","routerLinkActive","active","ariaCurrentWhenActive","edit-role-permission",1,"nav-link",3,"hideUnAuthorized","routerLink"],["appShowHide","","routerLinkActive","active",1,"nav-link",3,"hideUnAuthorized","routerLink"]],template:function(n,s){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"p",4),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.j41(9,"div",5)(10,"ul",6)(11,"li",7)(12,"a",8)(13,"span"),t.EFF(14),t.nI1(15,"translate"),t.k0s()()(),t.j41(16,"li",7)(17,"a",9)(18,"span"),t.EFF(19),t.nI1(20,"translate"),t.k0s()()()()()()(),t.nrm(21,"router-outlet")),2&n&&(t.R7$(4),t.JRh(t.bMT(5,8,"Settings.nav.Accessandpermission")),t.R7$(3),t.JRh(t.bMT(8,10,"Settings.nav.SettingOrder")),t.R7$(5),t.Y8G("hideUnAuthorized","list-role")("routerLink",t.lJ4(16,P)),t.R7$(2),t.SpI(" ",t.bMT(15,12,"common.Roles")," "),t.R7$(3),t.Y8G("hideUnAuthorized","list-user")("routerLink",t.lJ4(17,O)),t.R7$(2),t.SpI(" ",t.bMT(20,14,"Settings.nav.Users")," "))},dependencies:[h.n3,h.Wk,h.wQ,x.D,u.D9],styles:[".setup-wrapper[_ngcontent-%COMP%]{padding:16px;margin-bottom:0!important}.tabcontent[_ngcontent-%COMP%]{display:none;padding:6px 12px;border:1px solid #ccc;border-top:none}.back-buttons[_ngcontent-%COMP%]{background:#f20a6d!important;border:solid thin #dddddd!important;color:#fff!important;padding:4px 16px!important;float:right!important;margin-top:-45px;margin-right:10px}.active[_ngcontent-%COMP%]{background-color:transparent;border-bottom:solid green}"]})}}return i})();var v=c(84507),y=c(345),f=c(89417);const k=i=>({"disable-class":i});function w(i,p){if(1&i&&(t.j41(0,"span",9),t.EFF(1),t.nI1(2,"translate"),t.j41(3,"b"),t.EFF(4),t.nI1(5,"uppercase"),t.k0s()()),2&i){const e=t.XpG();t.R7$(),t.SpI("",t.bMT(2,2,"common.USER")," - "),t.R7$(3),t.JRh(t.bMT(5,4,null==e.detail?null:e.detail.name))}}function I(i,p){if(1&i){const e=t.RV6();t.j41(0,"div",2)(1,"input",18),t.mxI("ngModelChange",function(s){const r=t.eBV(e).$implicit;return t.DH7(r.selected,s)||(r.selected=s),t.Njj(s)}),t.bIt("change",function(s){const r=t.eBV(e).$implicit,o=t.XpG().$implicit,a=t.XpG(2);return a.result(),t.Njj(a.isSelected(a.ind,r,o,s))}),t.k0s(),t.j41(2,"label",19),t.EFF(3),t.k0s()()}if(2&i){const e=p.$implicit;t.R7$(),t.FS9("id",e.moduleId),t.Y8G("value",e.moduleId),t.R50("ngModel",e.selected),t.Y8G("checked",e.selected)("disabled",e.disabled),t.R7$(),t.FS9("for",e.moduleId),t.Y8G("ngClass",t.eq3(8,k,e.disabled)),t.R7$(),t.SpI(" ",null==e?null:e.name," ")}}function F(i,p){if(1&i&&(t.j41(0,"div",15)(1,"h3"),t.EFF(2),t.k0s(),t.j41(3,"div",16),t.DNE(4,I,4,10,"div",17),t.k0s()()),2&i){const e=p.$implicit;t.R7$(2),t.JRh(null==e?null:e.name),t.R7$(2),t.Y8G("ngForOf",null==e?null:e.permissionModule)}}function R(i,p){if(1&i){const e=t.RV6();t.j41(0,"div",10),t.DNE(1,F,5,2,"div",11),t.nI1(2,"async"),t.j41(3,"div",12)(4,"button",13),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.cancel())}),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"button",14),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.save())}),t.EFF(8),t.nI1(9,"translate"),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",t.bMT(2,4,e.sandbox.getPermissionsList$))("ngForTrackBy",e.colorTrackBy),t.R7$(4),t.SpI(" ",t.bMT(6,6,"Settings.nav.Cancel")," "),t.R7$(3),t.SpI("",t.bMT(9,8,"Settings.nav.Save")," ")}}let A=(()=>{class i{constructor(e,n,s,r,o){this.route=e,this.sandbox=n,this.changeDetect=s,this.router=r,this.titleService=o,this.limit=20,this.offset=0,this.subscriptions=[],this.selectAllPermission=!1,this.permissionArray=[],this.selectedPermissionArray=[],this.finalData=[],this.selectedData=[],this.selectAllData=!1,this.dataChecked=!1,this.titleService.setTitle("Settings | Access and permission")}ngOnInit(){this.detail=JSON.parse(this.route.snapshot.queryParams.user),this.type=this.detail.type,this.id=this.detail.id,this.subscribeList(),this.reset()}subscribeList(){const e={count:0};e.offset=this.offset,this.sandbox.getPermissionlist(e),this.subscriptions.push(this.sandbox.getPermissionsList$.subscribe(n=>{n&&(this.permissionList=n,this.permissionFullList())}))}permissionFullList(){const e={};e.refType="user"===this.type?2:1,e.refId=this.id,this.sandbox.getPermission(e),this.subscriptions.push(this.sandbox.getPermissionsList$.subscribe(n=>{this.changeDetect.detectChanges(),Object.keys(n).map(r=>({type:r,value:n[r]})).forEach(r=>{!0===r.value&&(this.changeDetect.detectChanges(),this.selectedPermissionArray.push(r.type))}),n&&this.permissionList.forEach(r=>{r.permissionModule?.forEach(o=>{this.selectedPermissionArray.includes(o.slugName)?(this.changeDetect.detectChanges(),o.selected=!0):(o.selected=!1,this.changeDetect.detectChanges()),this.changeDetect.detectChanges()})})}))}ngAfterContentChecked(){this.permissionList?.forEach(e=>{e.permissionModule.forEach(n=>{const r=e.permissionModule.filter(o=>!1===o.isList).some(o=>!0===o.selected);1==n.isList&&(n.disabled=r)})})}result(e){"selectAllData"==e&&this.reset(this.selectAllData);const n=this.permissionList.map(s=>{const r=s.permissionModule.every(o=>o.selected);return this.changeDetect.detectChanges(),r});this.selectAllData=n.every(s=>s),this.changeDetect.detectChanges()}reset(e=!1){this.permissionList?.forEach(n=>{n.permissionModule.forEach(s=>s.selected=e),this.changeDetect.detectChanges()}),this.changeDetect.detectChanges()}isSelected(e,n,s,r){this.permissionList.forEach(o=>{if(59==s.moduleGroupId)o.permissionModule.forEach(a=>{const l=o.permissionModule.filter(b=>!1===b.isList).some(b=>!0===b.selected);164==a.moduleId&&(a.selected=!0),163==a.moduleId&&(a.selected=!0),171==a.moduleId&&1==a.isList&&(a.selected=r.target.checked,a.disabled=l)});else if(o.moduleGroupId==s.moduleGroupId){const C=o.permissionModule.filter(l=>!1===l.isList).some(l=>!0===l.selected);o.permissionModule.forEach(l=>{1==l.isList&&(l.selected=!0,l.disabled=C),l.moduleId==n.moduleId&&(l.selected=r.target.checked)})}})}save(){this.permissionList.forEach(n=>{n.permissionModule&&n.permissionModule.forEach(s=>{1==s.selected&&this.permissionArray.push(s.slugName)})});const e={};e.refId=this.id,e.refType="user"===this.type?2:1,e.permission=JSON.stringify(this.permissionArray),this.sandbox.addPermission(e),this.subscriptions.push(this.sandbox.permissionAddLoaded$.subscribe(n=>{!0===n&&this.router.navigate(["/settings/access-and-permission"])}))}selectAll(e){this.sandbox.selectAllPermission(e),this.permissionList.forEach(1==e?n=>{n.permissionModule?.forEach(s=>{1==s.isList&&(s.disabled=!0),this.changeDetect.detectChanges()})}:n=>{n.permissionModule?.forEach(s=>{1==s.isList&&(s.disabled=!1),this.changeDetect.detectChanges()})})}statusChange(){this.getStatus()}getStatus(){let e=!0;this.permissionList?.forEach(n=>{e&&(e=n.permissionModule.every(s=>!0===s.selected))}),this.selectAllPermission=e}getPermissionList(){const e={count:0};e.offset=this.offset,this.sandbox.getPermissionlist(e)}getPermission(){const e={};e.refType="user"===this.type?2:1,e.refId=this.id,this.sandbox.getPermission(e),this.subscriptions.push(this.sandbox.permissionLoaded$.subscribe(n=>{n&&this.getStatus()}))}cancel(){this.router.navigate(["/settings/access-and-permission"])}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(h.nX),t.rXU(v.v),t.rXU(t.gRc),t.rXU(h.Ix),t.rXU(y.hE))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-permission"]],decls:21,vars:19,consts:[[1,"flex","main-header"],[1,"form-group"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","checkbox22",1,"custom-control-input",3,"ngModelChange","change","ngModel"],["for","checkbox22",1,"custom-control-label","cursor-pointer","chk-check"],[1,"permission-wrap"],["class","user",4,"ngIf"],[1,"user-role",2,"margin-left","10px"],["class","pw-row",4,"ngIf"],[1,"user"],[1,"pw-row"],["class","pw-wrap-row","onload","loading()",4,"ngFor","ngForOf","ngForTrackBy"],[1,"action-button-container","flex"],[1,"button-reg","btn-md","tertiary",3,"click"],["type","submit",1,"button-reg","btn-md","primary",3,"click"],["onload","loading()",1,"pw-wrap-row"],[1,"form-group","pw-row-full","flex"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],["type","checkbox",1,"custom-control-input",3,"ngModelChange","change","value","ngModel","checked","disabled","id"],[1,"custom-control-label","cursor-pointer","chk-check",3,"for","ngClass"]],template:function(n,s){1&n&&(t.j41(0,"div",0)(1,"h3"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",1)(5,"div",2)(6,"input",3),t.mxI("ngModelChange",function(o){return t.DH7(s.selectAllPermission,o)||(s.selectAllPermission=o),o}),t.bIt("change",function(o){return s.selectAll(o.target.checked)}),t.k0s(),t.j41(7,"label",4),t.EFF(8),t.nI1(9,"translate"),t.k0s()()()(),t.j41(10,"div",5),t.DNE(11,w,6,6,"span",6),t.j41(12,"span",7),t.EFF(13),t.nI1(14,"translate"),t.j41(15,"b"),t.EFF(16),t.nI1(17,"uppercase"),t.k0s()(),t.DNE(18,R,10,10,"div",8),t.nI1(19,"async"),t.nI1(20,"async"),t.k0s()),2&n&&(t.R7$(2),t.JRh(t.bMT(3,7,"Settings.nav.PermissionStatus")),t.R7$(4),t.R50("ngModel",s.selectAllPermission),t.R7$(2),t.SpI(" ",t.bMT(9,9,"Settings.nav.SelectAll")," "),t.R7$(3),t.Y8G("ngIf","user"===s.type),t.R7$(2),t.SpI("",t.bMT(14,11,"common.ROLE")," - "),t.R7$(3),t.JRh(t.bMT(17,13,null==s.detail?null:s.detail.role)),t.R7$(2),t.Y8G("ngIf",t.bMT(19,15,s.sandbox.permissionListLoaded$)&&t.bMT(20,17,s.sandbox.permissionLoaded$)))},dependencies:[g.YU,g.Sq,g.bT,f.Zm,f.BC,f.vS,g.Jj,g.Pc,u.D9],styles:['.main-header[_ngcontent-%COMP%]{justify-content:space-between;margin-bottom:0;padding:8px 16px}.main-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:inline-flex;font-size:18px;color:#222;margin-bottom:0;font-weight:500;padding-left:0}.main-header[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:0}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:#393939}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:12px!important;height:12px!important;left:0!important}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:4px!important;height:9px!important;top:5px!important;left:4px!important}.permission-wrap[_ngcontent-%COMP%]{padding:0 16px}.permission-wrap[_ngcontent-%COMP%]   span.user[_ngcontent-%COMP%]{color:#222}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]{padding:16px 0 0;border-bottom:solid 1px #ececec}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#3d3d3d;line-height:1.19;margin-bottom:1rem}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;align-items:flex-start;gap:32px;margin:0}.form-group[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]{padding-left:0;margin:0}.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{padding-left:20px}.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{top:.15rem}.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{top:3px!important}.main[_ngcontent-%COMP%]{display:block;background:#fff;padding:15px 30px 100px}.main[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{float:right;margin-top:10px;width:70px;padding:5px;background-color:#f2086d;border:none;color:#fff}.main[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.main[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{color:#f2086d;margin-bottom:5px;font-size:14px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;font-weight:800;letter-spacing:.5px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{box-shadow:0 0 2px 1px #cacaca;margin-top:8px;padding:20px 20px 20px 30px;flex-flow:row wrap;box-sizing:border-box;display:flex;height:500px;overflow-y:auto;justify-content:space-between}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]{height:auto;margin-right:1.33%;margin-bottom:30px;flex:1 1 33%;width:30%;box-sizing:border-box;max-width:30%;display:block}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding-bottom:9px;letter-spacing:.5px;border-bottom:2px solid #dadada}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:8px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-list[_ngcontent-%COMP%]   .roles[_ngcontent-%COMP%]{margin-top:20px}.save[_ngcontent-%COMP%]{background:#f2086d;border:solid thin transparent;color:#fff;padding:5px 20px;font-size:14px;margin:30px;float:right}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:35px;height:18px;margin-right:10px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:15px;width:15px;left:-8px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:15px;width:15px;left:3px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#f2086d}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #f2086d}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider.toggle-slide[_ngcontent-%COMP%]{border-radius:34px}.slider.toggle-slide[_ngcontent-%COMP%]:before{border-radius:50%}.pw-wrap-row[_ngcontent-%COMP%]{width:100%;border-radius:4px;box-shadow:0 2px 4px #00000013;border:solid 1px #eeeded;padding:15px;margin-bottom:16px}.chk-check[_ngcontent-%COMP%]{cursor:pointer}.action-button-container[_ngcontent-%COMP%]{position:sticky;left:0;bottom:0;width:100%;box-shadow:0 -2px 4px #00000012;z-index:9;justify-content:flex-end;align-items:center;height:4.25rem;padding-inline:1.5rem;gap:1rem}']})}}return i})();var d=c(64363);const S=[{path:"",component:_,children:[{path:"",redirectTo:function E(){const i=n=>n.length>0&&(0,d.C)(n),p=[{permission:"role",isRouteAccess:i((0,d.Mt)(d.W0.role)),routePath:"role"},{permission:"user",isRouteAccess:i((0,d.Mt)(d.W0.user)),routePath:"user"}],e=p.findIndex(n=>n.isRouteAccess);return p[e].routePath}(),pathMatch:"full"},{path:"role",loadChildren:()=>c.e(3464).then(c.bind(c,3464)).then(i=>i.RoleModule),data:{permissionForRoot:(0,d.Mt)(d.W0.role)},canActivate:[m.q]},{path:"user",loadChildren:()=>c.e(1214).then(c.bind(c,91214)).then(i=>i.UserModule),data:{permissionForRoot:(0,d.Mt)(d.W0.user)},canActivate:[m.q]},{path:"permission",component:A,canActivate:[m.q],data:{permissionKey:"edit-role-permission"}}]}];let L=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[h.iI.forChild(S),h.iI]})}}return i})();var j=c(88650),T=c(37886);let $=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[g.MD,L,T.UN,j.h,u.h.forChild()]})}}return i})()}}]);