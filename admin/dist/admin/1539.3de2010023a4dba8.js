"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[1539],{21539:(B,v,s)=>{s.r(v),s.d(v,{PersonalizeOrderModule:()=>X});var h=s(60177),o=s(89417),d=s(74054),S=s(41780),y=s(55153),R=s(40528),u=s(51188),t=s(54438),$=s(21858),l=s(1517);class I{constructor(c){this.invoicePrefix=c.invoicePrefix||"",this.orderStatus=c.orderStatus||0,this.settingId=c.settingId||0,this.siteUrl=c.siteUrl||0}}var f=s(34514),m=s(47255);const g=e=>e.personalizeOrder,j=((0,f.Mz)(g,m.FU),(0,f.Mz)(g,m.hI)),E=(0,f.Mz)(g,m.rY);var C=s(84745);let O=(()=>{class e{constructor(r){this.appState=r,this.getPersonalizeOrder$=this.appState.select(j),this.getSettingLoading$=this.appState.select(E)}createPersonalizeOrder(r){this.appState.dispatch(new l.EX(new I(r)))}getPersonalizeOrder(){this.appState.dispatch(new l.Sb)}static{this.\u0275fac=function(n){return new(n||e)(t.KVO(C.il))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac})}}return e})();var M=s(84361),T=s(345),b=s(72510),G=s(74937);const U=e=>({"is-invalid":e}),D=()=>["/settings"];function J(e,c){if(1&e&&(t.j41(0,"ng-option",21),t.EFF(1),t.k0s()),2&e){const r=c.$implicit;t.Y8G("value",r.orderStatusId),t.R7$(),t.JRh(r.name)}}const L=[{path:"",component:(()=>{class e{constructor(r,n,i,a,w){this.fb=r,this.orderStatusSandbox=n,this.sandbox=i,this.service=a,this.titleService=w,this.submitted=!1,this.subscriptions=[],this.keyword="",this.pageSize=5,this.statusList=[],this.titleService.setTitle("Settings | Personalize")}get f(){return this.perOrderForm.controls}ngOnInit(){this.initForm(),this.getPersonalizeOrder(),this.getOrderStatusList(this.offset,this.keyword)}initForm(){this.perOrderForm=this.fb.group({invoicePrefix:[null,[o.k0.required]],orderStatus:[null,[o.k0.required]]})}onSubmit(){if(this.submitted=!0,this.perOrderForm.invalid)return;const r={};r.orderStatus=this.perOrderForm.value.orderStatus,r.invoicePrefix=this.perOrderForm.value.invoicePrefix,r.settingId=this.settingsId,r.siteUrl=this.siteUrl,this.sandbox.createPersonalizeOrder(r)}getPersonalizeOrder(){this.sandbox.getPersonalizeOrder(),this.sandbox.getPersonalizeOrder$.subscribe(r=>{r&&(this.settingsId=r[0].settingsId,this.siteUrl=r[0].siteUrl)})}subscribe(){this.subscriptions.push(this.sandbox.getPersonalizeOrder$.subscribe(r=>{r&&r[0]&&(this.perOrderForm.controls.invoicePrefix.setValue(r[0].invoicePrefix),this.perOrderForm.controls.orderStatus.setValue(r[0].orderStatus))}))}getOrderStatusList(r=0,n){const i={status:1};i.keyword=this.keyword,this.service.getorderstatuslist(i).subscribe(a=>{a&&(this.statusList=a.data,this.subscribe())})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(o.ze),t.rXU($.o),t.rXU(O),t.rXU(M.N),t.rXU(T.hE))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-settings-countries"]],decls:50,vars:39,consts:[[1,"local-content"],[1,"set-lay-notes","flex"],[1,"setup-wrapper","setup-personalize"],[1,"setup-container","flex"],[1,"setup-left"],[1,"sub-header"],[1,"text14"],[1,"spinner-wrapper",2,"display","flex","justify-content","center","justify-items","center"],[2,"transform","translate(153%, 18%)","position","absolute",3,"isShow"],[1,"setup-right"],[1,"form-horizontal","m-t-20",2,"margin","0",3,"formGroup"],[1,"sup-rht-section"],[1,"suprs-form"],[1,"suprs-form-row","form-group","flex"],[1,"suprs-form-col"],["type","text","placeholder","Enter invoice prefix","formControlName","invoicePrefix",1,"form-control",3,"ngClass"],["formControlName","orderStatus",3,"placeholder","searchable","clearable"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","srbtn"],[1,"button-reg","btn-md","primary",3,"click"],[1,"button-reg","btn-md","tertiary",3,"routerLink"],[3,"value"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h4"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s()(),t.j41(8,"div",2)(9,"div",3)(10,"div",4)(11,"h3",5),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.j41(14,"p",6),t.EFF(15),t.nI1(16,"translate"),t.k0s()(),t.j41(17,"div",7),t.nrm(18,"app-global-loader",8),t.nI1(19,"async"),t.k0s(),t.j41(20,"div",9)(21,"form",10)(22,"div",11)(23,"div",12)(24,"div",13)(25,"label"),t.EFF(26),t.nI1(27,"translate"),t.j41(28,"sup"),t.EFF(29,"*"),t.k0s()(),t.j41(30,"div",14),t.nrm(31,"input",15),t.k0s()()(),t.j41(32,"div",12)(33,"div",13)(34,"label"),t.EFF(35),t.nI1(36,"translate"),t.j41(37,"sup"),t.EFF(38,"*"),t.k0s()(),t.j41(39,"div",14)(40,"ng-select",16),t.nI1(41,"translate"),t.DNE(42,J,2,2,"ng-option",17),t.k0s()()()(),t.j41(43,"div",18)(44,"button",19),t.bIt("click",function(){return i.onSubmit()}),t.EFF(45),t.nI1(46,"translate"),t.k0s(),t.j41(47,"button",20),t.EFF(48),t.nI1(49,"translate"),t.k0s()()()()()()()()),2&n&&(t.R7$(3),t.JRh(t.bMT(4,16,"Settings.nav.Note:")),t.R7$(3),t.JRh(t.bMT(7,18,"Settings.paragraph.Admincanconfigurethenumberoforders")),t.R7$(6),t.JRh(t.bMT(13,20,"Settings.personalize.order.Order")),t.R7$(3),t.JRh(t.bMT(16,22,"Settings.paragraph.Commonprefixforalltheordernumbers")),t.R7$(3),t.Y8G("isShow",t.bMT(19,24,i.sandbox.getSettingLoading$)),t.R7$(3),t.Y8G("formGroup",i.perOrderForm),t.R7$(5),t.SpI("",t.bMT(27,26,"Settings.personalize.order.InvoicePrefix")," "),t.R7$(5),t.Y8G("ngClass",t.eq3(36,U,i.submitted&&i.f.invoicePrefix.errors)),t.R7$(4),t.SpI("",t.bMT(36,28,"Settings.personalize.order.OrderStatus")," "),t.R7$(5),t.FS9("placeholder",t.bMT(41,30,"Settings.personalize.order.ChooseOrderStatus")),t.Y8G("searchable",!1)("clearable",!1),t.R7$(2),t.Y8G("ngForOf",i.statusList),t.R7$(3),t.JRh(t.bMT(46,32,"Settings.Local.Save")),t.R7$(2),t.Y8G("routerLink",t.lJ4(38,D)),t.R7$(),t.JRh(t.bMT(49,34,"Settings.personalize.order.Cancel")))},dependencies:[h.YU,h.Sq,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,b.vr,b.xt,u.Wk,G.q,h.Jj,S.D9],styles:[".mat-radio-outer-circle[_ngcontent-%COMP%]{left:-3px!important;margin-top:-3px!important;width:19px!important}.settings-right-wrapper[_ngcontent-%COMP%]{margin-top:0!important}.coc[_ngcontent-%COMP%]{background:#f20a6d;border:solid thin #dddddd;color:#fff;padding:4px 16px}"]})}}return e})()}];let N=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[u.iI.forChild(L),u.iI]})}}return e})();var Y=s(94194);let F=(()=>{class e extends Y.j{constructor(){super(...arguments),this.url=this.getBaseUrl()}createOrder(r){return this.http.post(this.url+"/settings",r)}getOrder(){return this.http.get(this.url+"/settings?defaultWebsite=1")}static{this.\u0275fac=(()=>{let r;return function(i){return(r||(r=t.xGo(e)))(i||e)}})()}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac})}}return e})();var z=s(7673),P=s(96354),p=s(25558),x=s(99437);let k=(()=>{class e{constructor(r,n){this.action$=r,this.service=n,this.doAddseo$=(0,d.EH)(()=>this.action$.pipe((0,d.gp)(l.Q3.DO_NEW_ORDER_SETTINGS),(0,P.T)(i=>i.payload),(0,p.n)(i=>this.service.createOrder(i).pipe((0,p.n)(a=>[new l.NJ(a)]),(0,x.W)(a=>(0,z.of)(new l.gf(a))))))),this.dogetseosetting$=(0,d.EH)(()=>this.action$.pipe((0,d.gp)(l.Q3.DO_ORDER_SETTINGS),(0,P.T)(i=>i.payload),(0,p.n)(()=>this.service.getOrder().pipe((0,p.n)(i=>[new l.nB(i)]),(0,x.W)(i=>(0,z.of)(new l.qj(i)))))))}static{this.\u0275fac=function(n){return new(n||e)(t.KVO(d.En),t.KVO(F))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac})}}return e})();var V=s(88650);let X=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({providers:[O,F],imports:[h.MD,R.D,o.YN,o.X1,y.G,N,S.h.forChild(),V.h,d.Vm.forFeature([k])]})}}return e})()}}]);