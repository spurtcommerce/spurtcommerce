"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[2634],{42634:(Qt,D,l)=>{l.r(D),l.d(D,{EmailTemplateModule:()=>Yt});var T=l(60177),R=l(40528),u=l(89417),d=l(74054),P=l(94194),t=l(54438);let C=(()=>{class a extends P.j{constructor(){super(...arguments),this.url=this.getBaseUrl()}setemailtemplistdata(e){this.emailtemplistdata=e}getemailtemplistdata(){return this.emailtemplistdata}addEmailtemp(e){return this.http.post(this.url+"/email-template/add-email-template",e)}updateEmailTemp(e){return this.http.put(this.url+"/email-template/update-email-template/"+e.Id,e)}emailtemplist(e){let i={};return i=e,this.http.get(this.url+"/email-template/email-templatelist",{params:i})}emailtempPagiantion(e){let i={};return i=e,this.http.get(this.url+"/email-template/email-templatelist",{params:i})}deleteEmailtemp(e,i){return this.http.delete(this.url+"/email-template/delete-email-template/"+i,e)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=t.xGo(a)))(n||a)}})()}static{this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac})}}return a})();var m=l(15774),r=l(34514),c=l(88346);const p=a=>a.emailtemp,N=(0,r.Mz)(p,c.nN),k=(0,r.Mz)(p,c.PD),_=(0,r.Mz)(p,c.Er),V=(0,r.Mz)(p,c.vA),X=(0,r.Mz)(p,c.EE),U=(0,r.Mz)(p,c.vT),z=(0,r.Mz)(p,c.Sr),Y=(0,r.Mz)(p,c.OX),w=(0,r.Mz)(p,c.QQ),H=(0,r.Mz)(p,c.ZV),Q=(0,r.Mz)(p,c.xP),B=(0,r.Mz)(p,c.og),J=(0,r.Mz)(p,c.P8),K=(0,r.Mz)(p,c.H8),W=(0,r.Mz)(p,c.cD),Z=(0,r.Mz)(p,c.$H),q=(0,r.Mz)(p,c.D9),tt=(0,r.Mz)(p,c.Ag),et=(0,r.Mz)(p,c.dZ),it=(0,r.Mz)(p,c.Jt);class A{constructor(s){this.title=s.title||"",this.subject=s.subject||"",this.content=s.content||"",this.status=s.status||0,this.dynamicFieldsRef=s.dynamicFieldsRef||"",s&&s.id&&(this.Id=s.id||0)}}class ${constructor(s){this.limit=s.limit||0,this.offset=s.offset||0,this.keyword=s.keyword||"",this.count=s.count||0}}var at=l(84745),g=l(51188),st=l(48256);let I=(()=>{class a{constructor(e,i,n){this.appState=e,this.router=i,this.toastr=n,this.emailTempList$=this.appState.select(N),this.emailTempPagination$=this.appState.select(k),this.getAddEmailTemp$=this.appState.select(_),this.updateEmailTemp$=this.appState.select(V),this.emailTempDelete$=this.appState.select(X),this.emailTempListLoading$=this.appState.select(U),this.emailTempListLoaded$=this.appState.select(z),this.emailTempListFailed$=this.appState.select(Y),this.emailTempDeleteLoading$=this.appState.select(W),this.emailTempDeleteLoaded$=this.appState.select(Z),this.emailTempDeleteFailed$=this.appState.select(q),this.emailTempCountLoading$=this.appState.select(w),this.emailTempCountLoaded$=this.appState.select(H),this.emailTempCountFailed$=this.appState.select(Q),this.emailTempAddLoading$=this.appState.select(B),this.emailTempAddLoaded$=this.appState.select(J),this.emailTempAddFailed$=this.appState.select(K),this.emailTempUpdateLoading$=this.appState.select(tt),this.emailTempUpdateLoaded$=this.appState.select(et),this.emailTempUpdateFailed$=this.appState.select(it),this.subscriptions=[]}addEmailTemplate(e){this.appState.dispatch(new m.cK(new A(e)))}updateEmailTemplate(e){this.appState.dispatch(new m.jq(new A(e)))}getEmailTemplateList(e){this.appState.dispatch(new m.YB(new $(e)))}emailTemplateDelete(e){this.appState.dispatch(new m.ll(e))}emailTemplatePagination(e){this.appState.dispatch(new m.Qn(new $(e)))}subscribe(){this.subscriptions.push(this.getAddEmailTemp$.subscribe(e=>{e&&e.message&&this.router.navigate(["/settings/local/emailtemp"])})),this.subscriptions.push(this.updateEmailTemp$.subscribe(e=>{e&&e.message&&1===e.status&&this.router.navigate(["/settings/local/emailtemp"])}))}static{this.\u0275fac=function(i){return new(i||a)(t.KVO(at.il),t.KVO(g.Ix),t.KVO(st.tw))}}static{this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac})}}return a})();var E=l(7673),y=l(96354),h=l(25558),v=l(99437);let nt=(()=>{class a{constructor(e,i){this.action$=e,this.service=i,this.doAddEmailTemp$=(0,d.EH)(()=>this.action$.pipe((0,d.gp)(m.Q3.DO_NEW_EMAIL_TEMP_ACTION),(0,y.T)(n=>n.payload),(0,h.n)(n=>this.service.addEmailtemp(n).pipe((0,h.n)(o=>[new m.v7(o)]),(0,v.W)(o=>(0,E.of)(new m.iP(o))))))),this.doUpdateEmailTemp$=(0,d.EH)(()=>this.action$.pipe((0,d.gp)(m.Q3.DO_UPDATE_EMAIL_TEMP_ACTION),(0,y.T)(n=>n.payload),(0,h.n)(n=>this.service.updateEmailTemp(n).pipe((0,h.n)(o=>[new m.yh(o)]),(0,v.W)(o=>(0,E.of)(new m.lP(o))))))),this.doemailtemplists$=(0,d.EH)(()=>this.action$.pipe((0,d.gp)(m.Q3.GET_EMAIL_TEMP_LIST_ACTION),(0,y.T)(n=>n.payload),(0,h.n)(n=>this.service.emailtemplist(n).pipe((0,h.n)(o=>[new m.TI(o)]),(0,v.W)(o=>(0,E.of)(new m.gn(o))))))),this.doemailtemppagination$=(0,d.EH)(()=>this.action$.pipe((0,d.gp)(m.Q3.GET_EMAIL_TEMP_COUNT_ACTION),(0,y.T)(n=>n.payload),(0,h.n)(n=>this.service.emailtempPagiantion(n).pipe((0,h.n)(o=>[new m.Jl(o)]),(0,v.W)(o=>(0,E.of)(new m.sH(o))))))),this.doEmailtempDelete$=(0,d.EH)(()=>this.action$.pipe((0,d.gp)(m.Q3.DO_EMAIL_TEMP_DELETE),(0,y.T)(n=>n.payload),(0,h.n)(n=>this.service.deleteEmailtemp(n,n.emailTemplateId).pipe((0,h.n)(b=>[new m.WD(b)]),(0,v.W)(b=>(0,E.of)(new m.fG(b)))))))}static{this.\u0275fac=function(i){return new(i||a)(t.KVO(d.En),t.KVO(C))}}static{this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac})}}return a})();function M(a){const s=a.dynamicFieldsRef.split(",").map(e=>e.slice(1,-1));for(const e of s)if(!a.content.includes(`{${e}}`))return!0;return!1}const lt={Title:{label:"Settings.Local.Emailtemplate.Title",name:"title",validatiors:[u.k0.required],type:"text",placeholder:"Settings.Local.Emailtemplate.Title",mandatory:!0},Subject:{label:"Settings.Local.Emailtemplate.Subject",name:"subject",validatiors:[u.k0.required],type:"text",placeholder:"Settings.Local.Emailtemplate.Subject",mandatory:!0,isDisabled:!0},dynamicFieldsRef:{label:"Settings.Local.Emailtemplate.DynamicFieldsRef",name:"dynamicFieldsRef",validatiors:[u.k0.required],type:"text",placeholder:"Settings.Local.Emailtemplate.DynamicFieldsRef",mandatory:!0,isDisabled:!0},Content:{label:"Settings.Local.Emailtemplate.Content",name:"content",validatiors:[u.k0.required],type:"text",placeholder:"Settings.Local.Emailtemplate.Content",mandatory:!0,isDisabled:!0},status:{label:"Settings.Local.Emailtemplate.Status",name:"status",validatiors:[u.k0.required],type:"ngSelect",placeholder:"Settings.Local.Emailtemplate.Status",mandatory:!0,customData:{data:[{id:1,name:"Enabled",displayName:"Settings.Local.Language.Enabled"},{id:0,name:"Disabled",displayName:"Settings.Local.Language.Enabled"}],key:"name",value:"id"}}};var ot=l(43718),mt=l.n(ot),x=l(98852),f=l(37886),rt=l(70782),ct=l(18186),S=l(41780);const pt=(a,s)=>({"is-invalid":a,isDisable:s});function dt(a,s){1&a&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.JRh(t.bMT(2,1,"Settings.Local.Emailtemplate.Error.Contentisrequired")))}function ut(a,s){if(1&a&&(t.j41(0,"div",14),t.DNE(1,dt,3,3,"div",9),t.k0s()),2&a){const e=t.XpG(3);t.R7$(),t.Y8G("ngIf",e.f.content.errors.required)}}function ht(a,s){1&a&&(t.j41(0,"div",15),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"common.Dynamic field value")," "))}function gt(a,s){if(1&a&&(t.qex(0),t.j41(1,"div",10)(2,"label"),t.EFF(3),t.nI1(4,"translate"),t.j41(5,"sup"),t.EFF(6,"*"),t.k0s()(),t.nrm(7,"textarea",11),t.DNE(8,ut,2,1,"div",12)(9,ht,3,3,"div",13),t.k0s(),t.bVm()),2&a){const e=t.XpG().$implicit,i=t.XpG();t.R7$(3),t.JRh(t.bMT(4,6,"Settings.Local.Emailtemplate.Content")),t.R7$(4),t.Y8G("formControl",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].control)("ngClass",t.l_i(8,pt,i.submitted&&i.f.content.errors,null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].isDisabled))("readonly",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].isDisabled),t.R7$(),t.Y8G("ngIf",i.submitted&&i.f.content.errors),t.R7$(),t.Y8G("ngIf",i.dynamicFieldsValue&&i.submitted)}}function ft(a,s){if(1&a&&(t.qex(0),t.nrm(1,"app-common-form",16),t.bVm()),2&a){const e=t.XpG().$implicit,i=t.XpG();t.R7$(),t.Y8G("type",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].type)("control",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].control)("label",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].label)("inputId",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].inputId)("aliasName",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].aliasName)("placeholder",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].placeholder)("submitted",i.submitted)("customData",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].customData)("mandatory",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].mandatory)("isDisabled",null==i.dynamicObjControls[e]?null:i.dynamicObjControls[e].isDisabled)}}function bt(a,s){if(1&a&&(t.qex(0),t.DNE(1,gt,10,11,"ng-container",9)(2,ft,2,10,"ng-container",9),t.bVm()),2&a){const e=s.$implicit;t.R7$(),t.Y8G("ngIf","Content"==e),t.R7$(),t.Y8G("ngIf","Content"!=e)}}let F=(()=>{class a{constructor(e,i,n,o,b,j,O,wt){this.modalService=e,this.fb=i,this.route=n,this.sandbox=o,this.router=b,this.service=j,this.changeDetectRef=O,this.ckeconfiqservice=wt,this._Object=Object,this.dynamicObjControls={},this.editEmailTemplateInfo=[],this.submitted=!1,this.dynamicFieldsValue=!1,this.editor=mt(),this.limit=sessionStorage.getItem("itemsPerPage")?Number(sessionStorage.getItem("itemsPerPage")):10,this.trackByIndex=Ht=>Ht,this.config=this.ckeconfiqservice.getEditorConfig()}get f(){return this.formObjFormGroup.controls}ngOnInit(){this.buildForm(),this.editEmailTempId=this.route.snapshot.paramMap.get("id"),this.setDefaultValues(),this.editEmailtempList()}setDefaultValues(){this.formObjFormGroup.patchValue({postalcode:"Yes",tc:!0})}close(){this.modalService.close("close")}cancel(){this.router.navigate(["/settings/local/emailtemp"])}onSubmit(){if(this.submitted=!0,this.dynamicFieldsValue=M({content:this.formObjFormGroup.value.content,dynamicFieldsRef:this.editEmailTemplateInfo[0].dynamicFieldsRef}),this.formObjFormGroup.invalid||this.dynamicFieldsValue)return;const i={};i.title=this.formObjFormGroup.value.title,i.subject=this.formObjFormGroup.value.subject,i.content=this.formObjFormGroup.value.content,i.status=this.formObjFormGroup.value.status,i.dynamicFieldsRef=this.formObjFormGroup.value.dynamicFieldsRef,this.editEmailTemplateInfo&&this.editEmailTemplateInfo[0]?(i.id=this.editEmailTemplateInfo[0].emailTemplateId,this.sandbox.updateEmailTemplate(i)):this.sandbox.addEmailTemplate(i),this.modalService.close("close")}editEmailtempList(){this.editEmailTemplateInfo.push(this.service.getemailtemplistdata()),null!==this.editEmailTemplateInfo[0]?this.editEmailTemplateInfo[0]&&this.editEmailTemplateInfo[0].title&&(this.updateTitle=1,this.formObjFormGroup.controls.title.setValue(this.editEmailTemplateInfo[0].title),this.formObjFormGroup.controls.subject.setValue(this.editEmailTemplateInfo[0].subject),this.formObjFormGroup.controls.content.setValue(this.htmlTagConversion(this.editEmailTemplateInfo[0].content)),this.formObjFormGroup.controls.status.setValue(this.editEmailTemplateInfo[0].isActive),this.formObjFormGroup.controls.dynamicFieldsRef.setValue(this.editEmailTemplateInfo[0].dynamicFieldsRef)):this.formObjFormGroup=null}htmlTagConversion(e){return e.replaceAll("&amp;","&").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;",'"').replaceAll("&#39;","'").replaceAll("&sbquo;","\u201a").replaceAll("&#61;","=").replaceAll("&#45;","-").replaceAll("&hellip;","\u2026").replaceAll("&commat;","@").replaceAll("&copy;","\xa9").replaceAll("&#35;","#").replaceAll("&ldquo;","\u201c").replaceAll("&rsquo;","\u2019").replaceAll("&lsquo;","\u2018").replaceAll("&trade;","\u2122").replaceAll("&reg;","\xae").replaceAll("&ndash;","\u2013").replaceAll("&eacute;","\xe9").replaceAll("&euro;","\u20ac").replaceAll("&pound;","\xa3")}saveChanges(){if(this.submitted=!0,this.dynamicFieldsValue=M({content:this.formObjFormGroup.value.content,dynamicFieldsRef:this.editEmailTemplateInfo[0].dynamicFieldsRef}),this.changeDetectRef.detectChanges(),this.formObjFormGroup.invalid)return;const i={};i.title=this.formObjFormGroup.value.title,i.subject=this.formObjFormGroup.value.subject,i.content=this.formObjFormGroup.value.content,i.status=this.formObjFormGroup.value.status,this.editEmailTemplateInfo&&this.editEmailTemplateInfo[0]?(i.id=this.editEmailTemplateInfo[0].emailTemplateId,this.sandbox.updateEmailTemplate(i)):this.sandbox.addEmailTemplate(i),this.modalService.close("close")}buildForm(){const e=lt,i=(0,x.b0)(e);this.formObjFormGroup=this.fb.group(i),Object.keys(e).forEach(n=>{this.dynamicObjControls[n]=(0,x.yE)(e[n],this.formObjFormGroup)})}static{this.\u0275fac=function(i){return new(i||a)(t.rXU(f.Lw),t.rXU(u.ze),t.rXU(g.nX),t.rXU(I),t.rXU(g.Ix),t.rXU(C),t.rXU(t.gRc),t.rXU(rt.z))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-spurt-addemail"]],decls:15,vars:11,consts:[[1,"flex","setting2-inner-header"],[1,"modal-header__title"],[1,"close-modal",3,"click"],["src","assets/img/modal-close.svg"],[1,"modal-body"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"action-button-container","flex"],[1,"button-reg","btn-md","tertiary",3,"click"],["type","submit()",1,"button-reg","btn-md","primary",3,"click"],[4,"ngIf"],[1,"form-group"],[2,"height","9rem",3,"formControl","ngClass","readonly"],["class","invalid-feedback",4,"ngIf"],["class","errors",4,"ngIf"],[1,"invalid-feedback"],[1,"errors"],[3,"type","control","label","inputId","aliasName","placeholder","submitted","customData","mandatory","isDisabled"]],template:function(i,n){1&i&&(t.j41(0,"div",0)(1,"h3",1),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return n.close()}),t.nrm(5,"img",3),t.k0s()(),t.j41(6,"div",4),t.DNE(7,bt,3,2,"ng-container",5),t.k0s(),t.j41(8,"div",6)(9,"button",7),t.bIt("click",function(){return n.close()}),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"button",8),t.bIt("click",function(){return n.onSubmit()}),t.EFF(13),t.nI1(14,"translate"),t.k0s()()),2&i&&(t.R7$(2),t.JRh(n.updateTitle?"Update Email Template":t.bMT(3,5,"Add Email Template")),t.R7$(5),t.Y8G("ngForOf",n._Object.keys(n.dynamicObjControls))("ngForTrackBy",n.trackByIndex),t.R7$(3),t.JRh(t.bMT(11,7,"Settings.generalsettings.Cancel")),t.R7$(3),t.JRh(t.bMT(14,9,"Settings.generalsettings.Save")))},dependencies:[T.YU,T.Sq,T.bT,u.me,u.BC,u.l_,ct.V,S.D9],styles:[".errors[_ngcontent-%COMP%]{color:red}.isDisable[_ngcontent-%COMP%]{opacity:.6}",".settings-right-wrapper[_ngcontent-%COMP%]{margin-top:0!important}"]})}}return a})();var Tt=l(55735),Et=l(64363);function G(a){for(const s in a)a.hasOwnProperty(s)&&(null==a[s]||""===a[s])&&delete a[s];return a}const vt={1:{text:"common.Active",class:"active"},0:{text:"common.In-Active",class:"inactive"}};var Ct=l(18359),St=l(345),It=l(27952),Ft=l(34501),Lt=l(42612),jt=l(87277);const Ot=(a,s,e)=>({productStatus:a,itemsDynamic:s,ElementEmailContent:e});function Dt(a,s){1&a&&t.nrm(0,"app-list-skeleton")}function At(a,s){if(1&a){const e=t.RV6();t.j41(0,"app-common-table",22),t.nI1(1,"async"),t.bIt("buttonChangeEvent",function(n){t.eBV(e);const o=t.XpG(2);return t.Njj(o.buttonAction(n))}),t.k0s()}if(2&a){t.XpG();const e=t.sdS(11),i=t.sdS(13),n=t.sdS(15),o=t.XpG();t.Y8G("HeadArray",o.dynamicColumnFields)("GridArray",t.bMT(1,3,o.sandbox.emailTempList$))("customTemplate",t.sMw(5,Ot,e,n,i))}}function $t(a,s){if(1&a&&t.nrm(0,"app-common-badge",23),2&a){const e=s.$implicit,i=t.XpG(2);t.Y8G("badge",i.badgeStatusMappings.hasOwnProperty(e.isActive)?i.badgeStatusMappings[e.isActive]:"")}}function Mt(a,s){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.R7$(),t.JRh(e.content)}}function xt(a,s){1&a&&t.nrm(0,"span",24),2&a&&t.Y8G("innerHTML",s.$implicit.dynamicFieldsRef,t.npT)}function Gt(a,s){if(1&a){const e=t.RV6();t.j41(0,"app-reusable-pagination",25),t.bIt("pageChange",function(n){t.eBV(e);const o=t.XpG(2);return t.Njj(o.onPageChange(n))}),t.k0s()}if(2&a){const e=t.XpG(2);t.Y8G("type","numbers")("currentPage",e.currentPage)("totalItems",e.listCount)("pageSize",e.limit)}}function Rt(a,s){if(1&a&&(t.j41(0,"div",14),t.nrm(1,"div",15),t.k0s(),t.j41(2,"div",16),t.DNE(3,Dt,1,0,"app-list-skeleton",17),t.nI1(4,"async"),t.j41(5,"div",18)(6,"div",19),t.DNE(7,At,2,9,"app-common-table",20),t.nI1(8,"async"),t.nI1(9,"async"),t.DNE(10,$t,1,1,"ng-template",null,1,t.C5r)(12,Mt,2,1,"ng-template",null,2,t.C5r)(14,xt,1,1,"ng-template",null,3,t.C5r)(16,Gt,1,4,"app-reusable-pagination",21),t.k0s()()()),2&a){let e;const i=t.XpG();t.R7$(3),t.Y8G("ngIf",t.bMT(4,3,i.sandbox.emailTempListLoading$)),t.R7$(4),t.Y8G("ngIf",(null==(e=t.bMT(8,5,i.sandbox.emailTempList$))?null:e.length)>0&&!t.bMT(9,7,i.sandbox.emailTempListLoading$)),t.R7$(9),t.Y8G("ngIf",i.listCount>i.limit)}}let Pt=(()=>{class a{constructor(e,i,n,o,b,j,O){this.modal=e,this.router=i,this.sandbox=n,this.service=o,this.titleService=b,this.route=j,this.ref=O,this.dynamicColumnFields=structuredClone((()=>{const a=(0,Et.ZQ)();return[{displayName:"Settings.Local.Emailtemplate.Title",id:"title",type:"default",checked:!0,filterColName:"Settings.Local.Emailtemplate.Title"},{displayName:"Settings.Local.Emailtemplate.Subject",id:"subject",type:"default",checked:!0,filterColName:"Settings.Local.Emailtemplate.Subject",customStyle:{trow:{class:"text-center"},tbody:{class:"text-center"}}},{displayName:"Settings.Local.Emailtemplate.Content",id:"ElementEmailContent",type:"template",checked:!0,filterColName:"Settings.Local.Emailtemplate.Content"},{displayName:"Settings.Local.Emailtemplate.DynamicFieldsRef",id:"itemsDynamic",type:"template",checked:!0,filterColName:"Settings.Local.Emailtemplate.DynamicFieldsRef"},{displayName:"Settings.Local.Emailtemplate.Status",id:"productStatus",type:"template",checked:!0,filterColName:"Settings.Local.Emailtemplate.Status",customStyle:{trow:{class:"text-center"},tbody:{class:"text-center"}}},{displayName:"Settings.Local.Emailtemplate.Action",id:"browser",type:"threeDotMenu",checked:!0,isDisable:!a["edit-email-template"]&&!a["delete-email-template"],customStyle:{trow:{class:"text-center"},tbody:{class:"text-center"}},menuData:[{name:"Edit",img:"assets/img/edit.svg",displayName:"marketplace.common.Edit",isDisable:!a["edit-email-template"]},{name:"Delete",img:"assets/img/delete-new.svg",displayName:"marketplace.common.Delete",isDisable:!a["delete-email-template"]}]}]})()),this.badgeStatusMappings=vt,this.limit=sessionStorage.getItem("itemsPerPage")?Number(sessionStorage.getItem("itemsPerPage")):10,this.index=0,this.keyword="",this.offset=0,this.paginationCount=!0,this.currentPage=1,this.subscriptions=new Ct.yU,this.titleService.setTitle("Settings | Personalize"),this.regSubscribeEvents()}ngOnInit(){this.routeSubscribe()}buttonAction(e){"threeDotMenu"===e.key&&("Delete"==e.actionType?this.deleteEmailtemp(e?.vendorOrderId):"Edit"==e.actionType&&this.editEmailtemp(e))}getemailtempList(){this.offset=(this.currentPage-1)*this.limit;const e=G(this.getQueryParam());e.count=0,this.sandbox.getEmailTemplateList(e),this.sandbox.emailTempList$.subscribe(i=>{}),this.updateQueryParam()}getemailtempListCount(){this.offset=(this.currentPage-1)*this.limit;const e=G(this.getQueryParam());e.count=1,this.sandbox.emailTemplatePagination(e),this.sandbox.emailTempPagination$.subscribe(i=>{1==i?.status&&(this.listCount=i.data,this.ref.detectChanges())})}updateQueryParam(){this.router.navigate([],{queryParams:this.getQueryParam(),queryParamsHandling:"merge"})}routeSubscribe(){let e={};this.subscriptions.add(this.route.queryParams.subscribe(i=>{e=i,this.limit=e.limit?Number(e.limit):10,this.offset=e.offset?Number(e.offset):0,this.currentPage=Number(e.offset&&e.limit)?Math.floor(e.offset/e.limit)+1:1})),this.getemailtempList(),this.getemailtempListCount()}getQueryParam(){return{limit:this.limit,offset:this.offset}}addNewEmailTemp(){this.service.setemailtemplistdata(""),this.router.navigate(["/settings/local/emailtemp/add"])}editEmailtemp(e){const i=this.modal.open(F,{windowClass:"add-local",keyboard:!1,backdrop:"static"});e&&(this.service.setemailtemplistdata(e),i.componentInstance.id=e.emailTemplateId)}deleteEmailtemp(e){const i=this.modal.open(Tt.i,{size:"sm",windowClass:"delete-confirm",backdrop:"static",modalDialogClass:"modal-dialog-centered",backdropClass:"createcr"});i.componentInstance.key="",i.componentInstance.id="",i.componentInstance.deleteMessage="Email Template",i.result.then(n=>{"Deleted"===n&&(this.sandbox.emailTemplateDelete({emailTemplateId:e}),this.regSubscribeEvents())})}regSubscribeEvents(){this.sandbox.emailTempDelete$.subscribe(e=>{e&&1===e.status&&this.getemailtempList()})}onPageChange(e){this.limit=e.limit,this.currentPage=Math.floor(e.offset/e.limit)+1,this.getemailtempList()}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(i){return new(i||a)(t.rXU(f.Bq),t.rXU(g.Ix),t.rXU(I),t.rXU(C),t.rXU(St.hE),t.rXU(g.nX),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-spurt-listemailtemp"]],decls:17,vars:7,consts:[["nav","ngbNav"],["itemTemplateRef",""],["elementEmailContent",""],["dynamicFieldsRef",""],[1,"local-content"],[1,"set-lay-notes","flex"],[1,"setup-wrapper","set-loc-wrapper"],[1,"setup-container","localization-container"],[1,"card","ap-general","ap-info"],[1,"flex","ap-body"],["ngbNav","",2,"width","100%"],["ngbNavItem",""],["ngbNavContent","",2,"display","flex !important"],[1,"mt-2",2,"width","100%",3,"ngbNavOutlet"],[1,"localize-header","flex"],[1,"loc-hdr-lft"],[1,"setup-right"],[4,"ngIf"],[1,"product-table"],[1,"table-responsive"],[3,"HeadArray","GridArray","customTemplate","buttonChangeEvent",4,"ngIf"],[3,"type","currentPage","totalItems","pageSize","pageChange",4,"ngIf"],[3,"buttonChangeEvent","HeadArray","GridArray","customTemplate"],[3,"badge"],[3,"innerHTML"],[3,"pageChange","type","currentPage","totalItems","pageSize"]],template:function(i,n){if(1&i&&(t.j41(0,"div",4)(1,"div",5)(2,"h4"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s()(),t.j41(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"ul",10,0)(14,"li",11),t.DNE(15,Rt,17,9,"ng-template",12),t.k0s()(),t.nrm(16,"div",13),t.k0s()()()()()),2&i){const o=t.sdS(13);t.R7$(3),t.JRh(t.bMT(4,3,"Settings.nav.Note:")),t.R7$(3),t.SpI("",t.bMT(7,5,"Settings.paragraph.Forsendingnotifications")," "),t.R7$(10),t.Y8G("ngbNavOutlet",o)}},dependencies:[T.bT,f.Um,f.X9,f.sy,f.Gx,f.m_,It.s,Ft.$,Lt.V,jt.C,T.Jj,S.D9],styles:[".settings-right-wrapper[_ngcontent-%COMP%]{margin-top:0!important}.coc[_ngcontent-%COMP%]{background:#f20a6d;border:solid thin #dddddd;color:#fff;padding:4px 16px}"]})}}return a})();var L=l(79176);const Nt=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:Pt,canActivate:[L.q],data:{permission:"list-email-template"}},{path:"add",component:F,canActivate:[L.q],data:{permission:"create-email-template"}},{path:"edit/:id",component:F,canActivate:[L.q],data:{permission:"edit-email-template"}}];let kt=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[g.iI.forChild(Nt),g.iI]})}}return a})();var _t=l(55153),Vt=l(99014),Xt=l(21626),Ut=l(88650),zt=l(95967);let Yt=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({providers:[C,I],imports:[T.MD,R.D,u.YN,u.X1,_t.G,kt,Ut.h,d.Vm.forFeature([nt]),S.h.forChild({loader:{provide:S.Wr,useFactory:Vt.M,deps:[Xt.Qq]}}),zt.w]})}}return a})()}}]);