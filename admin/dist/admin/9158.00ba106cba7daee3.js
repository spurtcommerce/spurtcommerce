"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[9158],{53332:(j,g,s)=>{s.d(g,{x:()=>dt});var v=s(18359),f=s(61322),d=s(89417),t=s(54438),u=s(51188),p=s(37886),_=s(34461),i=s(60177),b=s(41780);const S=["closeBtn"],F=n=>({disable:n});function k(n,r){1&n&&(t.j41(0,"span",20),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"marketplace.Errors.Titleisrequired")," "))}function y(n,r){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td",21),t.EFF(6),t.k0s(),t.j41(7,"td",22)(8,"button",23),t.bIt("click",function(){const a=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.removeSettlementItem(a))}),t.nrm(9,"img",24),t.k0s()()()}if(2&n){const e=r.$implicit,o=t.XpG();t.R7$(2),t.SpI("",e.orderProductPrefixId," "),t.R7$(2),t.JRh(e.companyName),t.R7$(2),t.E5c("",e.currencySymbolLeft," ",e.NetAmount," ",e.currencySymbolRight,""),t.R7$(2),t.Y8G("ngClass",t.eq3(6,F,1==o.settlementArray.length))}}let I=(()=>{class n{constructor(e,o,a,l,m){this.fb=e,this.router=o,this.modalService=a,this.sandbox=l,this.modal=m,this.title="",this.submitted=!1,this.subscriptions=[],this.orderId=[],this.isSubmitted=!1,this.settlTitle=d.EL}get f(){return this.SettleForm.controls}ngOnInit(){this.currency=sessionStorage.getItem("adminCurrency")?JSON.parse(sessionStorage.getItem("adminCurrency")):"",this.settlementArray.length>0&&this.calculateSettlement()}_formGroup(){this.SettleForm=this.fb.group({settlTitle:["",d.k0.required]})}calculateSettlement(){let e=0;this.settlementAmount=0,this.settlementArray.forEach(o=>{this.orderId.push(o.vendorOrderId),e+=+o.NetAmount,this.settlementAmount=e}),this.settlementAmount=this.settlementAmount?this.settlementAmount.toFixed(2):0}makeSettlement(){if(this.isSubmitted=!0,""!=this.title){const e={};e.title=this.title,e.vendorOrderId=this.orderId,this.sandbox.makeSettlement(e),this.sandbox.makeSettlement$.subscribe(o=>{o&&1===o.status&&(this.title="",this.modal.close("success"),this.subscribe())})}}removeSettlementItem(e){this.orderId=[],this.settlementArray=this.settlementArray.filter(o=>o.vendorOrderId!==e.vendorOrderId),this.calculateSettlement()}close(){this.modal.close()}subscribe(){this.subscriptions.push(this.sandbox.makeSettlement$.subscribe(e=>{e&&Object.keys(e).length&&1===e.status&&this.modal.close("success")}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.settlementArray=[],this.orderId=[]}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(d.ze),t.rXU(u.Ix),t.rXU(p.Bq),t.rXU(_.N),t.rXU(p.Lw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-settlement-modal"]],viewQuery:function(o,a){if(1&o&&t.GBs(S,5),2&o){let l;t.mGM(l=t.lsd())&&(a.closeAddExpenseModal=l.first)}},decls:56,vars:33,consts:[[1,"modal-content","right"],[1,"modal-body"],["type","button","data-dismiss","modal","aria-label","Close",1,"close-modal",3,"click"],["src","assets/img/modal-close.svg","alt","cancel"],[1,"modal-header__title"],[1,"form-group"],[1,"supvalidation"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["class","error-msg",4,"ngIf"],[1,"title-align"],[1,"header"],[1,"product-table"],[1,"table-responsive"],[1,"table"],["width","25%",1,"text-left"],["width","35%",1,"text-left"],["width","40%",1,"text-right"],[4,"ngFor","ngForOf"],[1,"modal-action-btns","flex"],[3,"click"],[1,"error-msg"],[1,"text-right","price"],[1,"text-center","action-btn"],[3,"click","ngClass"],["src","assets/img/cancel-btn.png","alt","cancel"]],template:function(o,a){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"button",2),t.bIt("click",function(){return a.close()}),t.nrm(3,"img",3),t.k0s(),t.j41(4,"h3",4),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"div",5)(8,"label"),t.EFF(9),t.nI1(10,"translate"),t.j41(11,"sup",6),t.EFF(12,"*"),t.k0s()(),t.j41(13,"input",7),t.mxI("ngModelChange",function(m){return t.DH7(a.title,m)||(a.title=m),m}),t.k0s(),t.DNE(14,k,3,3,"span",8),t.k0s(),t.j41(15,"div",9)(16,"h4"),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.j41(19,"span"),t.EFF(20,":"),t.k0s(),t.j41(21,"h4")(22,"b"),t.EFF(23),t.k0s()(),t.j41(24,"h4"),t.EFF(25),t.nI1(26,"translate"),t.k0s(),t.j41(27,"span"),t.EFF(28,":"),t.k0s(),t.j41(29,"h4")(30,"b"),t.EFF(31),t.k0s()()(),t.j41(32,"h5",10),t.EFF(33),t.nI1(34,"translate"),t.k0s(),t.j41(35,"div",11)(36,"div",12)(37,"table",13)(38,"thead")(39,"tr")(40,"th",14),t.EFF(41),t.nI1(42,"translate"),t.k0s(),t.j41(43,"th",15),t.EFF(44),t.nI1(45,"translate"),t.k0s(),t.j41(46,"th",16),t.EFF(47),t.nI1(48,"translate"),t.k0s(),t.nrm(49,"th"),t.k0s()(),t.j41(50,"tbody"),t.DNE(51,y,10,8,"tr",17),t.k0s()()()(),t.j41(52,"div",18)(53,"button",19),t.bIt("click",function(){return a.makeSettlement()}),t.EFF(54),t.nI1(55,"translate"),t.k0s()()()()),2&o&&(t.R7$(5),t.JRh(t.bMT(6,15,"marketplace.settlement.Settlement")),t.R7$(4),t.JRh(t.bMT(10,17,"marketplace.settlement.Title")),t.R7$(4),t.R50("ngModel",a.title),t.R7$(),t.Y8G("ngIf",a.isSubmitted&&""===a.title),t.R7$(3),t.SpI("",t.bMT(18,19,"marketplace.settlement.TotalOrders")," "),t.R7$(6),t.JRh(a.settlementArray.length),t.R7$(2),t.SpI("",t.bMT(26,21,"marketplace.settlement.TotalSettlementValue")," "),t.R7$(6),t.Lme("",a.currency.symbol,"",a.settlementAmount,""),t.R7$(2),t.JRh(t.bMT(34,23,"marketplace.settlement.SettlementDetails")),t.R7$(8),t.JRh(t.bMT(42,25,"marketplace.settlement.OrderLineNo")),t.R7$(3),t.JRh(t.bMT(45,27,"marketplace.payments.CompanyName")),t.R7$(3),t.JRh(t.bMT(48,29,"marketplace.payments.Amount")),t.R7$(4),t.Y8G("ngForOf",a.settlementArray),t.R7$(3),t.JRh(t.bMT(55,31,"marketplace.product.Save")))},dependencies:[i.YU,i.Sq,i.bT,d.me,d.BC,d.vS,b.D9],styles:[".modal-content[_ngcontent-%COMP%]{background:#fff!important}.modal-header__title[_ngcontent-%COMP%]{margin-bottom:1rem}.right[_ngcontent-%COMP%]{position:fixed;right:0;top:0;height:100vh;background:#fff;z-index:999;box-shadow:-5px 2px 8px #00000040}.modal.right[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{position:fixed;margin:auto;width:80%;max-width:60%;height:100%;transform:translateZ(0)}.modal.right[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{height:100%;overflow-y:auto}.modal.right[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:15px 15px 10px}.modal.right.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{top:200px;right:-80%;transition:opacity .3s linear,right .3s ease-out}.modal.right.fade.in[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%], .modal.right.fade.show[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{right:0}.modal-content[_ngcontent-%COMP%]{border-radius:0;border:none}.modal-open[_ngcontent-%COMP%]   .modal.settlement-modal.fade.in[_ngcontent-%COMP%]{opacity:1}.modal-body[_ngcontent-%COMP%]   button.close[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;background-color:#fff;border:none}.modal-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:#222;margin:0 0 10px}.modal-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:25px 0 20px}.error-msg[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;color:red}.form-group[_ngcontent-%COMP%]{margin-bottom:26px;position:relative}.disable[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.title-align[_ngcontent-%COMP%]{display:grid;grid-template-columns:.5fr 10px 1fr;align-items:baseline}"]})}}return n})();const M=[{displayName:"",id:"orderProductPrefixId",type:"checkBox",checked:!0,isEnableSelectall:!0,customStyle:{trow:{width:"35px"},tbody:{width:{width:"35px"}}}},{displayName:"marketplace.settlement.OrderLineNo",id:"orderProductPrefixId",type:"template",checked:!0},{displayName:"marketplace.settlement.CompanyName",id:"companyName",type:"default",checked:!0},{displayName:"marketplace.settlement.OrderDate",id:"createdDate",type:"date",checked:!0},{displayName:"marketplace.settlement.OrderAmount",type:"template",id:"total",checked:!0,customStyle:{trow:{class:"text-right"},tbody:{class:"text-right"}}},{displayName:"marketplace.settlement.CommisionAmount",type:"template",id:"CommissionAmount",checked:!0,customStyle:{trow:{class:"text-right"},tbody:{class:"text-right"}}},{displayName:"marketplace.settlement.NetAmount",type:"template",id:"NetAmount",checked:!0,customStyle:{trow:{class:"text-right"},tbody:{class:"text-right"}}},{displayName:"marketplace.settlement.OrderStatus(at Line Level)",id:"orderStatusName",type:"template",checked:!0,customStyle:{trow:{class:"text-center"},tbody:{class:"text-center"}}}],C={CompanyName:{label:"marketplace.payments.CompanyName",name:"CompanyName",aliasName:"",validatiors:[],type:"text",placeholder:"placeholder.Company Name"},FromDate:{label:"marketplace.payments.FromDate",name:"FromDate",aliasName:"",validatiors:[],type:"date",placeholder:"dd/mm/yyyy"},ToDate:{label:"marketplace.payments.ToDate",name:"ToDate",aliasName:"",validatiors:[],type:"date",placeholder:"dd/mm/yyyy"},RangeFrom:{label:"marketplace.settlement.RangeFrom",name:"RangeFrom",aliasName:"",type:"number",placeholder:"marketplace.settlement.RangeFrom"},RangeTo:{label:"marketplace.settlement.RangeTo",name:"RangeTo",aliasName:"",type:"number",placeholder:"marketplace.settlement.RangeTo"},OrderStatus:{label:"marketplace.settlement.OrderStatus",name:"OrderStatus",aliasName:"",validatiors:[],type:"ngSelect",placeholder:"marketplace.settlement.OrderStatus",customData:{data:[],key:"",value:""}},Search:{label:"marketplace.common.Search",name:"search",aliasName:"",validatiors:[],type:"text",placeholder:"marketplace.common.Search"}};function h(n){for(const r in n)n.hasOwnProperty(r)&&(null==n[r]||""===n[r])&&delete n[r];return n}var O=s(98852),c=s(345),L=s(60707),P=s(26848),T=s(27952),x=s(34501),N=s(42612),$=s(18186),A=s(35697),G=s(32749);const V=["myDropdown"],U=n=>({"collapse-div":n}),B=n=>({"disable-btn":n}),X=(n,r,e,o,a)=>({orderProductPrefixId:n,total:r,NetAmount:e,CommissionAmount:o,orderStatusName:a}),Y=n=>({background:n});function w(n,r){if(1&n&&(t.qex(0),t.EFF(1),t.nI1(2,"date"),t.bVm()),2&n){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.value,"dd/MM/yyyy")," ")}}function K(n,r){if(1&n&&(t.qex(0),t.EFF(1),t.nI1(2,"date"),t.bVm()),2&n){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.value,"dd/MM/yyyy")," ")}}function W(n,r){if(1&n&&(t.qex(0),t.EFF(1),t.bVm()),2&n){const e=t.XpG(2).$implicit,o=t.XpG();t.R7$(),t.SpI(" ",o.getDropdownValue("vendorList","vendorId",e.value,"companyName")," ")}}function J(n,r){if(1&n&&(t.qex(0),t.EFF(1),t.bVm()),2&n){const e=t.XpG(2).$implicit,o=t.XpG();t.R7$(),t.SpI(" ",o.getDropdownValue("orderStatusList","orderStatusId",e.value,"name")," ")}}function Q(n,r){if(1&n&&(t.qex(0),t.EFF(1),t.bVm()),2&n){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",e.value," ")}}function z(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",32)(1,"span"),t.EFF(2),t.k0s(),t.qex(3,33),t.DNE(4,w,3,4,"ng-container",34)(5,K,3,4,"ng-container",34)(6,W,2,1,"ng-container",34)(7,J,2,1,"ng-container",34)(8,Q,2,1,"ng-container",35),t.bVm(),t.j41(9,"button",36),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,l=t.XpG();return t.Njj(l.removeFilter(a))}),t.nrm(10,"img",37),t.k0s()()}if(2&n){const e=t.XpG().$implicit;t.R7$(2),t.SpI("",e.key," : "),t.R7$(),t.Y8G("ngSwitch",e.key),t.R7$(),t.Y8G("ngSwitchCase","FromDate"),t.R7$(),t.Y8G("ngSwitchCase","ToDate"),t.R7$(),t.Y8G("ngSwitchCase","ChooseVendor"),t.R7$(),t.Y8G("ngSwitchCase","ChooseVendor")}}function H(n,r){if(1&n&&(t.j41(0,"div",30),t.DNE(1,z,11,6,"div",31),t.k0s()),2&n){const e=r.$implicit,o=t.XpG();t.R7$(),t.Y8G("ngIf",!o.empty.includes(e.value))}}function Z(n,r){if(1&n&&t.nrm(0,"app-common-form",40),2&n){const e=t.XpG().$implicit,o=t.XpG();t.Y8G("type",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].type)("control",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].control)("label",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].label)("inputId",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].inputId)("aliasName",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].aliasName)("placeholder",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].placeholder)("customData",null==o.dynamicObjControls[e]?null:o.dynamicObjControls[e].customData)}}function q(n,r){if(1&n&&(t.j41(0,"div",38),t.DNE(1,Z,1,7,"app-common-form",39),t.k0s()),2&n){const e=r.$implicit,o=r.index;t.Y8G("ngClass",t.eq3(2,U,1==o||2==o||3==o||4==o)),t.R7$(),t.Y8G("ngIf","Search"!==e)}}function tt(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",41)(1,"button",42),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.makeSettlement())}),t.EFF(2),t.nI1(3,"translate"),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("hideUnAuthorized","make-settlement")("ngClass",t.eq3(6,B,0==e.selectedDatas.length))("disabled",0==e.selectedDatas.length),t.R7$(),t.SpI(" ",t.bMT(3,4,"marketplace.settlement.MakeSettlement")," ")}}function et(n,r){1&n&&t.nrm(0,"app-list-skeleton")}function nt(n,r){if(1&n){const e=t.RV6();t.j41(0,"app-common-table",43),t.bIt("buttonChangeEvent",function(a){t.eBV(e);const l=t.XpG();return t.Njj(l.buttonAction(a))}),t.k0s()}if(2&n){const e=t.XpG(),o=t.sdS(41),a=t.sdS(43),l=t.sdS(45),m=t.sdS(47),E=t.sdS(49);t.Y8G("customTemplate",t.s1E(4,X,o,a,l,m,E))("HeadArray",e.customTable)("GridArray",e.settlementList)("selectAll",e.tableCheckbox)}}function ot(n,r){if(1&n&&(t.j41(0,"span",44),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(null==e?null:e.orderProductPrefixId)}}function at(n,r){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"currencysymbol"),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",t.bMT(2,1,e.total)," ")}}function st(n,r){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"currencysymbol"),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",t.bMT(2,1,e.NetAmount)," ")}}function rt(n,r){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"currencysymbol"),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",t.bMT(2,1,e.CommissionAmount)," ")}}function lt(n,r){if(1&n&&(t.j41(0,"span",45),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("ngStyle",t.eq3(2,Y,null==e?null:e.orderColorCode)),t.R7$(),t.JRh(null==e?null:e.orderStatusName)}}function it(n,r){1&n&&(t.j41(0,"div",46)(1,"span"),t.nrm(2,"img",47),t.k0s(),t.j41(3,"h5"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()),2&n&&(t.R7$(4),t.JRh(t.bMT(5,1,"marketplace.payments.DataNotFound")))}function mt(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",48)(1,"app-reusable-pagination",49),t.nI1(2,"async"),t.bIt("pageChange",function(a){t.eBV(e);const l=t.XpG();return t.Njj(l.onPageChange(a))}),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("type","numbers")("currentPage",e.currentPage)("totalItems",t.bMT(2,4,e.sandbox.orderListCount$))("pageSize",e.limit)}}let dt=(()=>{class n{constructor(e,o,a,l,m,E,ct,pt){this.titleService=e,this.router=o,this.route=a,this.sandbox=l,this.fb=m,this.service=E,this.modalService=ct,this.envService=pt,this.customTable=M,this.currentPage=1,this.limit=sessionStorage.getItem("itemsPerPage")?Number(sessionStorage.getItem("itemsPerPage")):10,this.offset=0,this.queryData={},this.pagination=!0,this.settlementList=[],this.orderStatusList=[],this.vendorList=[],this.subscriptions=new v.yU,this.trackByIndex=ut=>ut,this.dynamicObjControls={},this.backupFormValue={},this.formValueExists=!1,this._Object=Object,this.empty=[null,"",void 0],this.selectedDatas=[],this.tableCheckbox={isSelectAll:!1},this.currency=JSON.parse(sessionStorage.getItem("adminCurrency"))}ngOnInit(){this.imageUrl=this.envService.imageUrl,this.titleService.setTitle("Settlement Order"),this.getDropDownList()}buttonAction(e){"checkBox"===e.key&&(this.selectedDatas=e.selectedDatas)}reset(e=!1){this.settlementList.forEach(o=>o.checked=e),this.selectedDatas=this.settlementList.filter(o=>o?.checked)}resetCheckbox(){this.reset(),this.tableCheckbox.isSelectAll=!1,this.tableCheckbox={...this.tableCheckbox}}dropDownClose(e){this.hasOwnProperty(e)&&this[e]?.close()}resetAll(){this.onPageChange({limit:this.limit,offset:0}),this.productCount(),this.dropDownClose("myDropdown")}applyFilter(){this.filterValueUpdate(),this.resetAll()}getDropdownValue(e,o,a,l){return this[e]?.find(m=>m?.[o]==a)?.[l]}getDropDownList(){this.subscriptions.add(this.service.orderStatusList({}).subscribe(e=>{1==e?.status&&(this.orderStatusList=e?.data,C.OrderStatus.customData={data:this.orderStatusList,key:"name",value:"orderStatusId"})})),this.subscriptions.add(this.service.vendorList({status:1}).subscribe(e=>{1==e?.status&&(this.vendorList=e?.data?.filter(o=>!this.empty.includes(o?.companyName)),this.buildForm(),this.routeSubscribe())}))}makeSettlement(){if(this.selectedDatas.length>0){const e=this.modalService.open(I,{windowClass:"add-roles",animation:!1,backdrop:"static",centered:!1});e.componentInstance.settlementArray=this.selectedDatas,e.result.then(o=>{"success"===o&&this.resetAll()})}}buildForm(){const e=C,o=(0,O.gQ)(e);this.formObjFormGroup=this.fb.group(o),Object.keys(e).forEach(a=>{this.dynamicObjControls[a]=(0,O.yE)(e[a],this.formObjFormGroup)}),this.filterValueUpdate()}removeFilter(e){this.formObjFormGroup.controls[e.key].reset(),this.filterValueUpdate(),this.resetAll()}filterReset(e){"clearAll"==e?this.formObjFormGroup.reset():this.formObjFormGroup.patchValue({CompanyName:"",FromDate:"",ToDate:"",RangeFrom:"",RangeTo:"",ChooseVendor:"",OrderStatus:""}),this.filterValueUpdate(),this.resetAll()}productList(){this.offset=(this.currentPage-1)*this.limit;let e=h(this.getQueryParam());e.count=0,this.sandbox.getSettlementOrderList(e),this.subscriptions.add(this.sandbox.orderList$.subscribe(o=>{this.settlementList=o})),this.updateQueryParam()}productCount(){this.offset=(this.currentPage-1)*this.limit;const e=h(this.getQueryParam());e.count=1,this.sandbox.getSettlementOrderListCount(e)}onPageChange(e){this.limit=e.limit,this.currentPage=Math.floor(e.offset/e.limit)+1,this.productList()}updateQueryParam(){this.router.navigate([],{queryParams:this.getQueryParam(),queryParamsHandling:"merge"})}getQueryParam(){return{limit:this.limit,offset:this.offset,keyword:this.backupFormValue.search??"",startDate:this.backupFormValue.FromDate?f(this.backupFormValue.FromDate).format("YYYY-MM-DD"):"",endDate:this.backupFormValue.ToDate?f(this.backupFormValue.ToDate).format("YYYY-MM-DD"):"",amountFrom:this.backupFormValue.RangeFrom?this.backupFormValue.RangeFrom:"",amountTo:this.backupFormValue.RangeTo?this.backupFormValue.RangeTo:"",vendorIds:this.backupFormValue.ChooseVendor?this.backupFormValue.ChooseVendor:"",orderStatus:this.backupFormValue.OrderStatus?this.backupFormValue.OrderStatus:"",companyName:this.backupFormValue?.CompanyName?this.backupFormValue?.CompanyName:""}}filterValueUpdate(){this.backupFormValue=structuredClone(this.formObjFormGroup?.value),this.formValueExists=Object.values(this.backupFormValue).some(e=>!this.empty.includes(e))}routeSubscribe(){let e={};this.subscriptions.add(this.route.queryParams.subscribe(o=>{e=o,this.limit=e.limit?Number(e.limit):this.limit,this.offset=e.offset?Number(e.offset):0,this.currentPage=e.offset&&e.limit?Math.floor(e.offset/e.limit)+1:1,this.formObjFormGroup.patchValue({CompanyName:e.companyName??"",FromDate:e.startDate?new Date(e.startDate):"",ToDate:e.endDate?new Date(e.endDate):"",RangeFrom:e.amountFrom??"",RangeTo:e.amountTo??"",ChooseVendor:e.vendorIds?Number(e.vendorIds):"",OrderStatus:e.orderStatus?Number(e.orderStatus):null,search:e.keyword??""}),this.filterValueUpdate()})),this.productList(),this.productCount()}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(c.hE),t.rXU(u.Ix),t.rXU(u.nX),t.rXU(_.N),t.rXU(d.ze),t.rXU(L.X),t.rXU(p.Bq),t.rXU(P.L))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-settlement-order-list"]],viewQuery:function(o,a){if(1&o&&t.GBs(V,5),2&o){let l;t.mGM(l=t.lsd())&&(a.myDropdown=l.first)}},decls:55,vars:48,consts:[["myDropdown","ngbDropdown"],["itemTemplateRef",""],["itemTemplateTotal",""],["itemTemplateNetAmount",""],["itemTemplateCommissionAmount",""],["itemTemplateRefcolor",""],[1,"flex","filter-row"],[1,"filter-lft"],[1,"filter-rht","flex"],["class","added-filter flex",4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-search"],[1,"",3,"keyup.enter"],[3,"type","control","label","inputId","aliasName","placeholder"],["ngbDropdown","",1,"dropdown","filter-dropdown",3,"autoClose"],["ngbDropdownToggle","",1,"button-reg","tertiary","btn-sm"],["src","assets/img/filter.svg","alt",""],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"filter-form"],[3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-btn","flex"],[1,"button-reg","btn-sm","primary",3,"click"],[1,"button-reg","btn-sm","tertiary",3,"click"],["class","filter-btns",4,"ngIf"],[1,"flex","product-wrap","example-full-width"],[1,"product-table"],[4,"ngIf"],[1,"table-responsive"],[3,"customTemplate","HeadArray","GridArray","selectAll","buttonChangeEvent",4,"ngIf"],["class","nodata-found",4,"ngIf"],["class","pagination flex",4,"ngIf"],[1,"added-filter","flex"],["class","added-filter-col flex filter-detail",4,"ngIf"],[1,"added-filter-col","flex","filter-detail"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"click"],["src","assets/img/close.svg","alt",""],[3,"ngClass"],[3,"type","control","label","inputId","aliasName","placeholder","customData",4,"ngIf"],[3,"type","control","label","inputId","aliasName","placeholder","customData"],[1,"filter-btns"],["appShowHide","","type","submit",1,"button-reg","primary","btn-sm",3,"click","hideUnAuthorized","ngClass","disabled"],[3,"buttonChangeEvent","customTemplate","HeadArray","GridArray","selectAll"],[1,"id"],["href","javascript:void(0)",1,"status-badge",3,"ngStyle"],[1,"nodata-found"],["src","assets/imgs/nodatafound.svg","alt",""],[1,"pagination","flex"],[3,"pageChange","type","currentPage","totalItems","pageSize"]],template:function(o,a){if(1&o){const l=t.RV6();t.j41(0,"div",6)(1,"div",7)(2,"h2"),t.EFF(3),t.nI1(4,"translate"),t.nI1(5,"async"),t.k0s()(),t.j41(6,"div",8),t.DNE(7,H,2,1,"div",9),t.nI1(8,"keyvalue"),t.j41(9,"div",10)(10,"form",11),t.bIt("keyup.enter",function(){return t.eBV(l),t.Njj(a.applyFilter())}),t.nrm(11,"app-common-form",12),t.k0s()(),t.j41(12,"div",13,0)(14,"button",14),t.nrm(15,"img",15),t.EFF(16),t.nI1(17,"translate"),t.k0s(),t.j41(18,"div",16)(19,"h4"),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.j41(22,"form",17),t.DNE(23,q,2,4,"div",18),t.j41(24,"div",19)(25,"button",20),t.bIt("click",function(){return t.eBV(l),t.Njj(a.applyFilter())}),t.EFF(26),t.nI1(27,"translate"),t.k0s(),t.j41(28,"button",21),t.bIt("click",function(){return t.eBV(l),t.Njj(a.filterReset(""))}),t.EFF(29),t.nI1(30,"translate"),t.k0s()()()()(),t.DNE(31,tt,4,8,"div",22),t.nI1(32,"async"),t.k0s()(),t.j41(33,"div",23)(34,"div",24),t.DNE(35,et,1,0,"app-list-skeleton",25),t.nI1(36,"async"),t.j41(37,"div",26),t.DNE(38,nt,1,10,"app-common-table",27),t.nI1(39,"async"),t.DNE(40,ot,2,1,"ng-template",null,1,t.C5r)(42,at,3,3,"ng-template",null,2,t.C5r)(44,st,3,3,"ng-template",null,3,t.C5r)(46,rt,3,3,"ng-template",null,4,t.C5r)(48,lt,2,4,"ng-template",null,5,t.C5r)(50,it,6,3,"div",28),t.nI1(51,"async"),t.DNE(52,mt,3,6,"div",29),t.nI1(53,"async"),t.nI1(54,"async"),t.k0s()()()}if(2&o){let l;t.R7$(3),t.Lme(" ",t.bMT(4,22,"marketplace.common.totalPaymentCount"),"(",t.bMT(5,24,a.sandbox.orderListCount$),")"),t.R7$(4),t.Y8G("ngForOf",t.bMT(8,26,a.backupFormValue))("ngForTrackBy",a.trackByIndex),t.R7$(4),t.Y8G("type",null==a.dynamicObjControls||null==a.dynamicObjControls.Search?null:a.dynamicObjControls.Search.type)("control",null==a.dynamicObjControls||null==a.dynamicObjControls.Search?null:a.dynamicObjControls.Search.control)("label",null==a.dynamicObjControls||null==a.dynamicObjControls.Search?null:a.dynamicObjControls.Search.label)("inputId",null==a.dynamicObjControls||null==a.dynamicObjControls.Search?null:a.dynamicObjControls.Search.inputId)("aliasName",null==a.dynamicObjControls||null==a.dynamicObjControls.Search?null:a.dynamicObjControls.Search.aliasName)("placeholder",null==a.dynamicObjControls||null==a.dynamicObjControls.Search?null:a.dynamicObjControls.Search.placeholder),t.R7$(),t.Y8G("autoClose",!1),t.R7$(4),t.SpI(" ",t.bMT(17,28,"marketplace.common.Filters")," "),t.R7$(4),t.SpI(" ",t.bMT(21,30,"marketplace.common.QuickFilter")," "),t.R7$(3),t.Y8G("ngForOf",a._Object.keys(a.dynamicObjControls))("ngForTrackBy",a.trackByIndex),t.R7$(3),t.SpI(" ",t.bMT(27,32,"marketplace.common.ApplyFilter")," "),t.R7$(3),t.SpI(" ",t.bMT(30,34,"marketplace.common.Reset")," "),t.R7$(2),t.Y8G("ngIf",(null==(l=t.bMT(32,36,a.sandbox.orderList$))?null:l.length)>0),t.R7$(4),t.Y8G("ngIf",t.bMT(36,38,a.sandbox.orderListLoading$)),t.R7$(3),t.Y8G("ngIf",t.bMT(39,40,a.sandbox.orderListLoaded$)&&a.settlementList.length>0),t.R7$(12),t.Y8G("ngIf",t.bMT(51,42,a.sandbox.orderListLoaded$)&&0==a.settlementList.length),t.R7$(2),t.Y8G("ngIf",t.bMT(53,44,a.sandbox.orderListLoaded$)&&t.bMT(54,46,a.sandbox.orderListCount$)>a.limit)}},dependencies:[i.YU,i.Sq,i.bT,i.B3,i.ux,i.e1,i.fG,p.tg,p.do,p.U0,d.qT,d.cb,d.cV,T.s,x.$,N.V,$.V,A.D,i.Jj,i.vh,i.lG,G.G,b.D9],styles:[".disable-btn[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.collapse-div[_ngcontent-%COMP%]{display:inline-block;width:43%;margin-inline:10px}"]})}}return n})()},69158:(j,g,s)=>{s.r(g),s.d(g,{SettlementModule:()=>O});var v=s(60177),f=s(51188),d=s(37886),t=s(88650),u=s(59855),p=s(41780),_=s(99014),i=s(21626),b=s(74054),S=s(76386),F=s(63298),k=s(16909),y=s(79176),I=s(34461),M=s(53332),D=s(55153),C=s(9948),h=s(54438);const R=[{path:"",redirectTo:"settlement-order",pathMatch:"full"},{path:"settlement-order",loadChildren:()=>Promise.all([s.e(2076),s.e(3051)]).then(s.bind(s,53051)).then(c=>c.SettlementOrderListModule),canActivate:[y.q],data:{permission:"settlement-product"}},{path:"settlement-history",loadChildren:()=>s.e(4574).then(s.bind(s,44574)).then(c=>c.SettlementHistoryModule),canActivate:[y.q],data:{permission:"settlement-product-history"}},{path:"",redirectTo:"settlement-order",pathMatch:"full"},{path:"settlement-order",component:M.x,data:{urls:[{title:"breadcrumbs.Marketplace",url:""},{title:"Manage Settlements",url:""},{title:"breadcrumbs.Settlement Orders",url:""}]}}];let O=(()=>{class c{static{this.\u0275fac=function(T){return new(T||c)}}static{this.\u0275mod=h.$C({type:c})}static{this.\u0275inj=h.G2t({providers:[I.N,S.A,F.W],imports:[f.iI.forChild(R),v.MD,t.h,u.K,d.UN,D.G,C.C,t.h,p.h.forChild({loader:{provide:p.Wr,useFactory:_.M,deps:[i.Qq]}}),b.Vm.forFeature([k.x])]})}}return c})()}}]);