"use strict";(self.webpackChunkspurt_multi_vendor=self.webpackChunkspurt_multi_vendor||[]).push([[485],{485:(cn,Q,r)=>{r.r(Q),r.d(Q,{MY_FORMATS:()=>it,PaymentsModule:()=>rn});var m=r(60177),p=r(89417),u=r(37886),H=r(86600),I=r(72510),f=r(74054),ot=r(49458),d=r(51188),j=r(18359),t=r(54438),rt=r(47364),lt=r(5944),ct=r(26747),T=r(41780);const mt=a=>({sitebar:a}),pt=a=>({handSymbolRemove:a}),ut=()=>["/payments/settlements"],dt=()=>["/payments/archived-payments"],ht=()=>["/payments/earning"];let bt=(()=>{class a{constructor(e,s,n){this.commonSandbox=e,this.approvalService=s,this.LoadingService=n,this.subscriptions=new j.yU,this.Disabled=!1,this.sideMenuOpen=!1}ngOnInit(){this.LoadingService.toggleState$.subscribe(s=>{this.toggleSide=s}),this.getSideMenu();let e=JSON.parse(localStorage.getItem("vendor-settings"));this.approvalService.mySubject$.subscribe(s=>{this.allowUnapprovedSeller=1==e?.kycMandate&&s?.approvalStatus})}getSideMenu(){this.LoadingService.toggleState$.subscribe(e=>this.sideMenuOpen=e),this.LoadingService.sideMenuOpen$.subscribe(e=>this.Disabled=e)}closeSideMenu(){this.LoadingService.toggleMenu()}closeMenu(){this.toggleSide||this.LoadingService.toggleStateValue()}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(s){return new(s||a)(t.rXU(rt.D),t.rXU(lt.X),t.rXU(ct.U))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-layout"]],decls:25,vars:31,consts:[[1,"page-wrapper",3,"ngClass"],[1,"page-subnav",3,"ngClass"],[3,"click"],["src","assets/imgs/expand-box.svg","alt",""],[1,"page-subnav-sublist"],[3,"click","routerLinkActive","routerLink"],["src","assets/imgs/menu-icons/settlements.svg","alt","Settlement"],["src","assets/imgs/menu-icons/archieved-payments.svg","alt","Archieved"],["src","assets/imgs/menu-icons/earnings.svg","alt","Earnings"],[1,"page-container"]],template:function(s,n){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3),t.nI1(4,"translate"),t.j41(5,"a",2),t.bIt("click",function(){return n.closeSideMenu()}),t.nrm(6,"img",3),t.k0s()(),t.j41(7,"div",4)(8,"a",5),t.bIt("click",function(){return n.closeMenu()}),t.nrm(9,"img",6),t.j41(10,"span"),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"a",5),t.bIt("click",function(){return n.closeMenu()}),t.nrm(14,"img",7),t.j41(15,"span"),t.EFF(16),t.nI1(17,"translate"),t.k0s()(),t.j41(18,"a",5),t.bIt("click",function(){return n.closeMenu()}),t.nrm(19,"img",8),t.j41(20,"span"),t.EFF(21),t.nI1(22,"translate"),t.k0s()()()(),t.j41(23,"div",9),t.nrm(24,"router-outlet"),t.k0s()()),2&s&&(t.Y8G("ngClass",t.eq3(24,mt,!n.sideMenuOpen)),t.R7$(),t.xc7("left",n.Disabled?"-15.9rem":n.sideMenuOpen?"4.5rem":"15.9rem"),t.Y8G("ngClass",t.eq3(26,pt,n.allowUnapprovedSeller)),t.R7$(2),t.SpI("",t.bMT(4,16,"payments.Payments")," "),t.R7$(5),t.Y8G("routerLinkActive","active")("routerLink",t.lJ4(28,ut)),t.R7$(3),t.JRh(t.bMT(12,18,"payments.Settlements")),t.R7$(2),t.Y8G("routerLinkActive","active")("routerLink",t.lJ4(29,dt)),t.R7$(3),t.JRh(t.bMT(17,20,"payments.ArchivedPayments")),t.R7$(2),t.Y8G("routerLinkActive","active")("routerLink",t.lJ4(30,ht)),t.R7$(3),t.JRh(t.bMT(22,22,"payments.Earnings")),t.R7$(2),t.xc7("padding-left",n.Disabled?"0rem":"13rem"))},dependencies:[m.YU,d.n3,d.Wk,d.wQ,T.D9]})}}return a})();var C=r(97586),S=r(28276),v=r(61403),$=r(96118);const yt={"payments.OrderID":!0,"uniformListColumName.orderDate":!0,"payments.Buyer":!0,"payments.Amount":!0,"payments.Commission":!0,"payments.NetAmount":!0,"payments.Settlement":!0,"payments.Action":!0};function W(a){for(const o in a)a.hasOwnProperty(o)&&(null==a[o]||""===a[o])&&delete a[o];return a}const K=[{displayName:"",id:"id",type:"checkBox",checked:!0,optionalFilterName:"Checkbox",isEnableSelectall:!0,customStyle:{trow:{class:"check-col"},tbody:{class:"check-col"}}},{displayName:"payments.OrderID",id:"orderProductPrefixId",type:"default",checked:!0,filterColName:"payments.OrderID",customStyle:{tbody:{}}},{displayName:"uniformListColumName.orderDate",id:"createdDate",type:"date",checked:!0,filterColName:"uniformListColumName.orderDate",customStyle:{tbody:{class:"text-nowrap"}}},{displayName:"payments.Buyer",id:"customerFirstName",type:"template",checked:!0,filterColName:"payments.Buyer"},{displayName:"payments.Amount",id:"amount",type:"currencySymbol",checked:!0,filterColName:"payments.Amount",customStyle:{trow:{class:"text-end price"},tbody:{class:"text-end price"}}},{displayName:"payments.Commission",id:"commissionAmount",type:"currencySymbol",checked:!0,filterColName:"payments.Commission",customStyle:{trow:{class:"text-end price"},tbody:{class:"text-end price"}}},{displayName:"payments.NetAmount",id:"NetAmount",type:"currencySymbol",checked:!0,filterColName:"payments.NetAmount",customStyle:{trow:{class:"text-end price"},tbody:{class:"text-end price"}}},{displayName:"payments.Status",id:"approvalStatus",type:"template",checked:!0,filterColName:"payments.Settlement",customStyle:{trow:{class:"text-center"},tbody:{class:"text-center"}}},{displayName:"payments.Action",type:"threeDotMenu",checked:!0,menuData:[{name:"Invoice",img:"assets/imgs/invoice.svg",displayName:"Invoice"},{name:"Archive",img:"assets/imgs/Archive.svg",displayName:"Archive"}],customStyle:{trow:{class:"text-center"},tbody:{class:"text-center"}}}],gt={fromDate:{name:"From Date",label:"payments.FromDate",aliasName:"",validatiors:[],type:"date",placeholder:"FromDate"},toDate:{name:"To Date",label:"payments.ToDate",validatiors:[],type:"date",placeholder:"ToDate"},Status:{name:"Status",label:"Select the status",validatiors:[],type:"ngSelect",placeholder:"Select the status",customData:{data:[{name:"Settled",id:1},{name:"Upcoming",id:0}],key:"name",value:"id"}},Search:{label:"",name:"Search",validatiors:[],type:"text",placeholder:"Settlements.Search"}},_t=(0,$.z)(["resetCheckbox","exportExcel","exportExcelAll"]),Ct={1:{text:"Settled",class:"active"},0:{text:"Upcoming",class:"amber"}};var k=r(48792),O=r(87491),P=r(345),N=r(19851),R=r(69720),M=r(29355),V=r(86723),L=r(57812),Y=r(41849),St=r(21235),w=r(28431);const vt=["dropdownContent"],kt=["dropdownContentFilter"],B=a=>({"disabled-class":a}),x=()=>["",null,void 0],X=(a,o)=>({active:a,"disabled-class":o}),Et=(a,o)=>({customerFirstName:a,approvalStatus:o});function Ft(a,o){if(1&a&&t.nrm(0,"app-reusable-forms",38),2&a){const e=t.XpG().$implicit,s=t.XpG();t.Y8G("type",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].type)("control",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].control)("label",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].label)("inputId",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].inputId)("aliasName",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].aliasName)("customData",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].customData)("placeholder",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].placeholder)}}function It(a,o){if(1&a&&(t.j41(0,"div"),t.DNE(1,Ft,1,7,"app-reusable-forms",37),t.k0s()),2&a){const e=o.$implicit;t.R7$(),t.Y8G("ngIf","Search"!==e)}}function jt(a,o){if(1&a&&(t.qex(0),t.EFF(1),t.bVm()),2&a){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",1==e.value?"Settled":"Upcoming"," ")}}function Tt(a,o){if(1&a&&(t.qex(0),t.EFF(1),t.bVm()),2&a){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",e.value," ")}}function xt(a,o){if(1&a){const e=t.RV6();t.j41(0,"div",42)(1,"span"),t.EFF(2),t.k0s(),t.qex(3,43),t.DNE(4,jt,2,1,"ng-container",44)(5,Tt,2,1,"ng-container",45),t.bVm(),t.j41(6,"a",46),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.removeFilter(n))}),t.nrm(7,"img",47),t.k0s()()}if(2&a){const e=t.XpG().$implicit;t.R7$(2),t.SpI("",e.key," : "),t.R7$(),t.Y8G("ngSwitch",e.key),t.R7$(),t.Y8G("ngSwitchCase","Status")}}function At(a,o){if(1&a&&(t.qex(0),t.DNE(1,xt,8,3,"div",41),t.bVm()),2&a){const e=o.$implicit;t.R7$(),t.Y8G("ngIf",!t.lJ4(1,x).includes(e.value))}}function Dt(a,o){if(1&a){const e=t.RV6();t.j41(0,"div",39)(1,"h4"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.DNE(4,At,2,2,"ng-container",22),t.nI1(5,"keyvalue"),t.j41(6,"a",40),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.filterReset("clearAll"))}),t.EFF(7),t.nI1(8,"translate"),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(2),t.SpI("",t.bMT(3,4,"common.Filter"),":"),t.R7$(2),t.Y8G("ngForOf",t.bMT(5,6,e.backupFormValue))("ngForTrackBy",e.trackByIndex),t.R7$(3),t.JRh(t.bMT(8,8,"common.ClearFilters"))}}function Gt(a,o){1&a&&(t.j41(0,"div"),t.nrm(1,"app-list-skeleton"),t.k0s())}function $t(a,o){if(1&a){const e=t.RV6();t.j41(0,"app-common-table",48),t.bIt("buttonChangeEvent",function(n){t.eBV(e);const i=t.XpG();return t.Njj(i.buttonAction(n))}),t.k0s()}if(2&a){const e=t.XpG(),s=t.sdS(69),n=t.sdS(71);t.Y8G("HeadArray",e.dynamicColumnFields)("GridArray",e.orderListArray)("selectAll",e.tableCheckbox)("customTemplate",t.l_i(4,Et,s,n))}}function Ot(a,o){if(1&a&&(t.j41(0,"p"),t.EFF(1),t.nrm(2,"br"),t.EFF(3),t.k0s()),2&a){const e=o.$implicit;t.R7$(),t.SpI("",e.customerFirstName," "),t.R7$(2),t.SpI(" ",e.shippingCity+", "+e.shippingCountry,"")}}function Pt(a,o){if(1&a&&t.nrm(0,"app-common-badge",49),2&a){const e=o.$implicit,s=t.XpG();t.Y8G("rejected",e)("badge",(s.badgeConfig.hasOwnProperty(e.makeSettlement),s.badgeConfig[e.makeSettlement]))}}function Nt(a,o){1&a&&(t.qex(0),t.EFF(1),t.nI1(2,"translate"),t.bVm()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"common.NoDataAvailablefortheFilteredCriteria")," "))}function Rt(a,o){1&a&&(t.EFF(0),t.nI1(1,"translate")),2&a&&t.SpI(" ",t.bMT(1,1,"payments.NoSettlementsareadded")," ")}function Mt(a,o){if(1&a&&(t.j41(0,"div",50)(1,"span"),t.nrm(2,"img",51),t.k0s(),t.j41(3,"h4"),t.DNE(4,Nt,3,3,"ng-container",52)(5,Rt,2,3,"ng-template",null,4,t.C5r),t.k0s()()),2&a){const e=t.sdS(6),s=t.XpG();t.R7$(4),t.Y8G("ngIf",s.formValueExists)("ngIfElse",e)}}function Vt(a,o){if(1&a){const e=t.RV6();t.j41(0,"app-reusable-pagination",53),t.nI1(1,"async"),t.bIt("pageChange",function(n){t.eBV(e);const i=t.XpG();return t.Njj(i.onPageChange(n))}),t.k0s()}if(2&a){const e=t.XpG();t.Y8G("ngClass",t.eq3(7,B,(null==e.selectedDatas?null:e.selectedDatas.length)>0))("type","numbers")("currentPage",e.currentPage)("pageSize",e.limit)("totalItems",t.bMT(1,5,e.paymentSandbox.totalPaymentCount$))}}function Lt(a,o){if(1&a){const e=t.RV6();t.j41(0,"app-bulk-action",54),t.bIt("actionEvent",function(n){t.eBV(e);const i=t.XpG();return t.Njj(i.actionType(n))}),t.k0s()}if(2&a){const e=t.XpG();t.Y8G("count",null==e.selectedDatas?null:e.selectedDatas.length)("bulkList",e.bulkAction)}}let Yt=(()=>{class a{constructor(e,s,n,i,c,l){this.paymentSandbox=e,this.router=s,this.route=n,this.modal=i,this.fb=c,this.titleService=l,this.currency=JSON.parse(localStorage.getItem("adminCurrency")),this.backupData=structuredClone(K),this.dynamicColumnFields=structuredClone(K),this.currentPage=1,this.limit=k.D,this.offset=0,this.pageSizeList=k.h,this.queryData={},this.pagination=!0,this.orderListArray=[],this.badgeConfig=Ct,this.selectedDatas=[],this.tableCheckbox={isSelectAll:!1},this.bulkAction=_t,this.backupColumns=structuredClone(yt),this._Object=Object,this.empty=[null,"",void 0],this.alertConfig={},this.dynamicObjControls={},this.backupFormValue={},this.formValueExists=!1,this.subscriptions=new j.yU,this.trackByIndex=_=>_,this.currencySymbol=JSON.parse(localStorage.getItem("adminCurrency")),this.AlltabStatus="2",this.titleService.setTitle("Payouts")}ngOnInit(){this.buildForm(),this.routeSubscribe()}open(){this.formObjFormGroup.patchValue(this.backupFormValue)}buttonAction(e){switch(e.key){case"threeDotMenu":"Invoice"==e.actionType?this.downloadInvoice(e?.vendorOrderId):"Archive"==e.actionType&&this.makeArchive(e?.vendorPaymentId);break;case"checkBox":this.selectedDatas=e.selectedDatas}}onPageChange(e){this.limit=e.limit,this.currentPage=Math.floor(e.offset/e.limit)+1,this.getOrderList()}pageSizeChange(e){this.onPageChange({limit:e.id,offset:0})}applyFilter(){this.offset=0,this.currentPage=1,this.AlltabStatus=this.AlltabStatus,this.filterValueUpdate(),console.log("gyhk",this.AlltabStatus,this.backupFormValue),this.resetAll(),this.tabRouting(this.backupFormValue.Status)}clearSearch(){this.resetAll()}searchItems(){this.resetAll()}removeFilter(e){this.formObjFormGroup.controls[e.key].reset(),this.AlltabStatus=this.AlltabStatus,this.filterValueUpdate(),this.resetAll()}filterReset(e){"clearAll"==e?this.formObjFormGroup.reset():this.formObjFormGroup.patchValue({"From Date":"","To Date":"",Status:""}),this.filterValueUpdate(),this.resetAll()}actionType(e){switch(e){case"resetCheckbox":this.resetCheckbox();break;case"exportExcel":this.exportExcel();break;case"exportExcelAll":this.exportExcelAll()}}saveColumns(e){this.backupColumns=structuredClone(e),this.showHideTableColumn()}getQueryParam(){return{limit:this.limit,offset:this.offset,currentPage:this.currentPage,keyword:this.backupFormValue.Search??"",orderId:this.backupFormValue["Order ID"]??"",startDate:this.backupFormValue["From Date"]?this.backupFormValue["From Date"]:"",endDate:this.backupFormValue["To Date"]?this.backupFormValue["To Date"]:""}}dropDownClose(e){this.hasOwnProperty(e)&&this[e]?.close()}tabRouting(e){console.log("asdjbas",e),this.AlltabStatus=e,this.getOrderList(),this.getOrderListcount()}routeSubscribe(){let e={};this.subscriptions.add(this.route.queryParams.subscribe(s=>{e=s,this.limit=e.limit?Number(e.limit):this.limit,this.offset=e.offset?Number(e.offset):0,this.currentPage=e.currentPage?Number(e.currentPage):1,this.formObjFormGroup.patchValue({"From Date":s.startDate??"","To Date":s.endDate??"",Search:s.keyword??"",Status:s.isSettlement??""}),this.filterValueUpdate()})),this.getOrderList(),this.getOrderListcount()}showHideTableColumn(){this.dynamicColumnFields.forEach(e=>{e.hasOwnProperty("filterColName")&&(e.checked=this.backupColumns[e.filterColName])})}getOrderList(){this.offset=(this.currentPage-1)*this.limit;let e=W(this.getQueryParam());e.count=0,e.isSettlement=["2",null,void 0].includes(this.AlltabStatus)?["",null,void 0].includes(this.backupFormValue?.Status)?"2":this.backupFormValue?.Status:this.AlltabStatus,"1"===this.AlltabStatus?e.isSettlement=1:"0"===this.AlltabStatus&&(e.isSettlement=0),this.paymentSandbox.getPaymentList(e),this.subscriptions.add(this.paymentSandbox.paymentList$.subscribe(s=>{this.orderListArray=[],s&&s.length>0&&(this.orderListArray=s,this.orderListArray.forEach(n=>{n.amountWithSymble=n.currencySymbolLeft?n.currencySymbolLeft+n.amount:n.amount,n.commissionAmountWithSymble=n.currencySymbolLeft?n.currencySymbolLeft+n.commissionAmount:n.commissionAmount,n.netAmountWithSymble=n.currencySymbolLeft?n.currencySymbolLeft+n.NetAmount:n.NetAmount}),this.alertConfig=(0,v.RI)("content.SettlementsList",v.PO.success,""),this.reset())})),this.updateQueryParam()}getOrderListcount(){this.offset=(this.currentPage-1)*this.limit;const e=W(this.getQueryParam());e.count=1,e.startDate=this.backupFormValue?.["From Date"]??"",e.endDate=this.backupFormValue?.["To Date"]??"",e.isSettlement=["2",null,void 0].includes(this.AlltabStatus)?["",null,void 0].includes(this.backupFormValue?.Status)?"2":this.backupFormValue?.Status:this.AlltabStatus,"1"===this.AlltabStatus?e.isSettlement=1:"0"===this.AlltabStatus&&(e.isSettlement=0),delete e.currentPage,delete e.limit,delete e.offset,this.paymentSandbox.getPaymentListCount(e)}updateQueryParam(){this.router.navigate([],{queryParams:this.getQueryParam(),queryParamsHandling:"merge"})}buildForm(){const e=gt,s=(0,S.b0)(e);this.formObjFormGroup=this.fb.group(s),Object.keys(e).forEach(n=>{this.dynamicObjControls[n]=(0,S.yE)(e[n],this.formObjFormGroup)}),this.filterValueUpdate()}resetAll(){this.getOrderList(),this.getOrderListcount(),this.dropDownClose("dropdownContentFilter"),this.dropDownClose("dropdownContent")}filterValueUpdate(){this.backupFormValue=structuredClone(this.formObjFormGroup?.value),this.backupFormValue["From Date"]&&(this.backupFormValue["From Date"]=C(this.backupFormValue["From Date"]).format("YYYY-MM-DD")),this.backupFormValue["To Date"]&&(this.backupFormValue["To Date"]=C(this.backupFormValue["To Date"]).format("YYYY-MM-DD")),this.formValueExists=Object.values(this.backupFormValue).some(e=>!this.empty.includes(e))}reset(e=!1){this.orderListArray.forEach(s=>s.checked=e),this.selectedDatas=this.orderListArray.filter(s=>s?.checked)}resetCheckbox(){this.reset(),this.tableCheckbox.isSelectAll=!1,this.tableCheckbox={...this.tableCheckbox}}downloadInvoice(e){const s={};s.vendorOrderId=e,this.paymentSandbox.downloadInvoice(s)}exportExcel(){const e={};e.vendorOrderId=this.selectedDatas.map(s=>s.vendorOrderId).toString(),this.paymentSandbox.multiplePaymentExport(e),this.subscriptions.add(this.paymentSandbox.MultiplePaymentExport$.subscribe(s=>{s&&this.resetCheckbox()}))}exportExcelAll(){this.paymentSandbox.multiplePaymentExport({vendorOrderId:[]}),this.subscriptions.add(this.paymentSandbox.MultiplePaymentExport$.subscribe(s=>{s&&this.resetCheckbox()}))}makeArchive(e){this.paymentSandbox.makePaymentArchive({vendorPaymentId:e}),this.subscriptions.add(this.paymentSandbox.makePaymentArchive$.subscribe(n=>{1==n?.status&&(this.getOrderList(),this.getOrderListcount())}))}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(s){return new(s||a)(t.rXU(O.A),t.rXU(d.Ix),t.rXU(d.nX),t.rXU(u.Bq),t.rXU(p.ze),t.rXU(P.hE))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-settlements"]],viewQuery:function(s,n){if(1&s&&(t.GBs(vt,5),t.GBs(kt,5)),2&s){let i;t.mGM(i=t.lsd())&&(n.dropdownContent=i.first),t.mGM(i=t.lsd())&&(n.dropdownContentFilter=i.first)}},decls:78,vars:92,consts:[["dropdownContent","ngbDropdown"],["dropdownContentFilter","ngbDropdown"],["item1",""],["itemTemplateRefapprovalStatus",""],["nodatafound",""],[1,"header-list","flexx"],[1,"header-list-rht","ms-auto","flexx",3,"ngClass"],[1,"per-page","flexx"],[1,"ig-row"],["bindLabel","id",3,"change","ngModelChange","items","searchable","clearable","ngModel"],["ngbDropdown","",1,"search-filter"],["tabindex","0","ngbDropdownToggle","","id","navbarDropdown2","role","button"],["src","assets/imgs/search.svg","alt","Search",3,"click"],["ngbDropdownMenu","","aria-labelledby","navbarDropdown2",1,"dropdown-menu","dropdown-menu-end"],[1,"",3,"keyup.enter"],[1,"input-group"],[3,"type","control","label","inputId","aliasName","placeholder"],["ngbDropdown","",1,"search-filter",3,"autoClose","ngClass"],["tabindex","0","ngbDropdownToggle","","id","navbarDropdown2"],["src","assets/imgs/filter.svg","alt","Filter"],["action","",1,"flex"],[1,"filter-content"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-action"],["type","button",1,"button-reg","btn-sm","primary",3,"click"],["type","button",1,"button-reg","btn-sm","trans-btn",3,"click"],[3,"selectedColumns","filterColumns"],["class","filter-result-row flexx",4,"ngIf"],[1,"inner-filter-row"],[1,"active","cursor",3,"click","ngClass"],[1,"cursor",3,"click","ngClass"],[1,"page-content"],[4,"ngIf"],[3,"HeadArray","GridArray","selectAll","customTemplate","buttonChangeEvent",4,"ngIf"],["class","nodata flexx",4,"ngIf"],["class","pagination flexx",3,"ngClass","type","currentPage","pageSize","totalItems","pageChange",4,"ngIf"],[3,"count","bulkList","actionEvent",4,"ngIf"],[3,"type","control","label","inputId","aliasName","customData","placeholder",4,"ngIf"],[3,"type","control","label","inputId","aliasName","customData","placeholder"],[1,"filter-result-row","flexx"],[1,"clear","cursor",3,"click"],["class","filter-result-col",4,"ngIf"],[1,"filter-result-col"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"cursor",3,"click"],["src","assets/imgs/close-sm.svg","alt","Close"],[3,"buttonChangeEvent","HeadArray","GridArray","selectAll","customTemplate"],[3,"rejected","badge"],[1,"nodata","flexx"],["src","assets/imgs/nodata.svg","alt","No data found"],[4,"ngIf","ngIfElse"],[1,"pagination","flexx",3,"pageChange","ngClass","type","currentPage","pageSize","totalItems"],[3,"actionEvent","count","bulkList"]],template:function(s,n){if(1&s){const i=t.RV6();t.nrm(0,"app-breadcrumbs"),t.j41(1,"header")(2,"div",5)(3,"h1"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"div",6),t.nI1(7,"async"),t.nI1(8,"async"),t.j41(9,"div",7)(10,"p"),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.j41(13,"div",8)(14,"ng-select",9),t.bIt("change",function(l){return t.eBV(i),t.Njj(n.pageSizeChange(l))}),t.mxI("ngModelChange",function(l){return t.eBV(i),t.DH7(n.limit,l)||(n.limit=l),t.Njj(l)}),t.k0s()()(),t.j41(15,"div",10,0)(17,"button",11)(18,"img",12),t.bIt("click",function(){return t.eBV(i),t.Njj(n.open())}),t.k0s(),t.EFF(19),t.nI1(20,"translate"),t.k0s(),t.j41(21,"div",13)(22,"h5"),t.EFF(23),t.nI1(24,"translate"),t.k0s(),t.j41(25,"form",14),t.bIt("keyup.enter",function(){return t.eBV(i),t.Njj(n.applyFilter())}),t.j41(26,"div",15)(27,"div",8),t.nrm(28,"app-reusable-forms",16),t.k0s()()()()(),t.j41(29,"div",17,1),t.nI1(31,"async"),t.nI1(32,"async"),t.j41(33,"button",18),t.nrm(34,"img",19),t.EFF(35),t.nI1(36,"translate"),t.k0s(),t.j41(37,"div",13)(38,"h5"),t.EFF(39),t.nI1(40,"translate"),t.k0s(),t.j41(41,"form",20)(42,"div",21),t.DNE(43,It,2,1,"div",22),t.k0s(),t.j41(44,"div",23)(45,"button",24),t.bIt("click",function(){return t.eBV(i),t.Njj(n.applyFilter())}),t.EFF(46),t.nI1(47,"translate"),t.k0s(),t.j41(48,"button",25),t.bIt("click",function(){return t.eBV(i),t.Njj(n.filterReset(""))}),t.EFF(49),t.nI1(50,"translate"),t.k0s()()()()(),t.j41(51,"app-dynamic-columns",26),t.bIt("selectedColumns",function(l){return t.eBV(i),t.Njj(n.saveColumns(l))}),t.k0s()()()(),t.DNE(52,Dt,9,10,"div",27),t.j41(53,"div",28)(54,"a",29),t.bIt("click",function(){return t.eBV(i),t.Njj(n.tabRouting("2"))}),t.EFF(55),t.nI1(56,"translate"),t.k0s(),t.j41(57,"a",30),t.bIt("click",function(){return t.eBV(i),t.Njj(n.tabRouting("1"))}),t.EFF(58),t.nI1(59,"translate"),t.k0s(),t.j41(60,"a",30),t.bIt("click",function(){return t.eBV(i),t.Njj(n.tabRouting("0"))}),t.EFF(61),t.nI1(62,"translate"),t.k0s()(),t.j41(63,"div",31),t.DNE(64,Gt,2,0,"div",32),t.nI1(65,"async"),t.DNE(66,$t,1,7,"app-common-table",33),t.nI1(67,"async"),t.DNE(68,Ot,4,2,"ng-template",null,2,t.C5r)(70,Pt,1,2,"ng-template",null,3,t.C5r)(72,Mt,7,2,"div",34),t.nI1(73,"async"),t.nI1(74,"async"),t.DNE(75,Vt,2,9,"app-reusable-pagination",35),t.nI1(76,"async"),t.k0s(),t.DNE(77,Lt,1,2,"app-bulk-action",36)}2&s&&(t.R7$(4),t.JRh(t.bMT(5,36,"payments.Settlements")),t.R7$(2),t.Y8G("ngClass",t.eq3(76,B,t.bMT(7,38,n.paymentSandbox.paymentListLoaded$)&&0==t.bMT(8,40,n.paymentSandbox.paymentList$).length||(null==n.selectedDatas?null:n.selectedDatas.length)>0)),t.R7$(5),t.JRh(t.bMT(12,42,"common.PerPage")),t.R7$(3),t.Y8G("items",n.pageSizeList)("searchable",!1)("clearable",!1),t.R50("ngModel",n.limit),t.R7$(5),t.SpI("",t.bMT(20,44,"common.Search")," "),t.R7$(4),t.JRh(t.bMT(24,46,"common.Search")),t.R7$(5),t.Y8G("type",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.type)("control",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.control)("label",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.label)("inputId",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.inputId)("aliasName",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.aliasName)("placeholder",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.placeholder),t.R7$(),t.Y8G("autoClose",!1)("ngClass",t.eq3(78,B,t.bMT(31,48,n.paymentSandbox.paymentListLoaded$)&&0==t.bMT(32,50,n.paymentSandbox.paymentList$).length)),t.R7$(6),t.SpI("",t.bMT(36,52,"common.Filter")," "),t.R7$(4),t.JRh(t.bMT(40,54,"payments.Filter")),t.R7$(4),t.Y8G("ngForOf",n._Object.keys(n.dynamicObjControls))("ngForTrackBy",n.trackByIndex),t.R7$(3),t.SpI(" ",t.bMT(47,56,"common.apply filters"),""),t.R7$(3),t.JRh(t.bMT(50,58,"common.reset")),t.R7$(2),t.Y8G("filterColumns",n.backupColumns),t.R7$(),t.Y8G("ngIf",n.formValueExists),t.R7$(2),t.Y8G("ngClass",t.l_i(81,X,"2"==n.AlltabStatus,!t.lJ4(80,x).includes(n.backupFormValue.Status))),t.R7$(),t.JRh(t.bMT(56,60,"common.All")),t.R7$(2),t.Y8G("ngClass",t.l_i(85,X,"1"==n.AlltabStatus,!t.lJ4(84,x).includes(n.backupFormValue.Status))),t.R7$(),t.JRh(t.bMT(59,62,"common.Settled")),t.R7$(2),t.Y8G("ngClass",t.l_i(89,X,"0"==n.AlltabStatus,!t.lJ4(88,x).includes(n.backupFormValue.Status))),t.R7$(),t.JRh(t.bMT(62,64,"common.Upcoming")),t.R7$(3),t.Y8G("ngIf",t.bMT(65,66,n.paymentSandbox.paymentListLoading$)),t.R7$(2),t.Y8G("ngIf",n.orderListArray.length>0&&!t.bMT(67,68,n.paymentSandbox.paymentListLoading$)),t.R7$(6),t.Y8G("ngIf",t.bMT(73,70,n.paymentSandbox.paymentListLoaded$)&&0==t.bMT(74,72,n.paymentSandbox.paymentList$).length),t.R7$(3),t.Y8G("ngIf",t.bMT(76,74,n.paymentSandbox.totalPaymentCount$)>0),t.R7$(2),t.Y8G("ngIf",(null==n.selectedDatas?null:n.selectedDatas.length)>0))},dependencies:[m.YU,m.Sq,m.bT,m.ux,m.e1,m.fG,p.qT,p.BC,p.cb,N.m,R.L,M.e,V.$,L.y,Y.V,St.C,w.S,p.vS,p.cV,u.tg,u.do,u.U0,I.vr,m.Jj,m.lG,T.D9],styles:[".loading[_ngcontent-%COMP%]{margin-top:5%;display:flex;justify-content:center}.disabled-class[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"]})}}return a})();const wt={"payments.OrderID":!0,"payments.DateTime":!0,"payments.Buyer":!0,"payments.Amount":!0,"payments.Commission":!0,"payments.NetAmount":!0};function q(a){for(const o in a)a.hasOwnProperty(o)&&(null==a[o]||""===a[o])&&delete a[o];return a}const Z=[{displayName:"",id:"id",type:"checkBox",checked:!0,optionalFilterName:"Checkbox",isEnableSelectall:!0,customStyle:{trow:{class:"tableAlign"},tbody:{class:"tableAlign"}}},{displayName:"payments.OrderID",id:"orderProductPrefixId",type:"default",checked:!0,filterColName:"payments.OrderID",customStyle:{tbody:{}}},{displayName:"payments.DateTime",id:"createdDate",type:"date",checked:!0,filterColName:"payments.DateTime",customStyle:{tbody:{class:"text-nowrap"}}},{displayName:"payments.Buyer",id:"customerFirstName",type:"template",checked:!0,filterColName:"payments.Buyer"},{displayName:"payments.Amount",id:"amountWithSymble",type:"default",checked:!0,filterColName:"payments.Amount",customStyle:{trow:{class:"text-end price"},tbody:{class:"text-end price"}}},{displayName:"payments.Commission",id:"commissionAmountWithSymble",type:"default",checked:!0,filterColName:"payments.Commission",customStyle:{trow:{class:"text-end price"},tbody:{class:"text-end price"}}},{displayName:"payments.NetAmount",id:"netAmountWithSymble",type:"default",checked:!0,filterColName:"payments.NetAmount",customStyle:{trow:{class:"text-end price"},tbody:{class:"text-end price"}}},{displayName:"Sales.shared.action",type:"buttonGroup",checked:!0,filterColName:"Sales.shared.action",buttons:[{displayName:"Revoke",image:"",key:"Revoke",customStyle:{trow:{class:"text-center"},tbody:{class:"primary button-reg link-text text-center"}}}]}],Bt={fromDate:{name:"From Date",label:"payments.FromDate",aliasName:"",validatiors:[],type:"date",placeholder:"FromDate"},toDate:{name:"To Date",label:"payments.ToDate",validatiors:[],type:"date",placeholder:"ToDate"},Search:{label:"",name:"Search",validatiors:[],type:"text",placeholder:"Settlements.Search"}},Ut=(0,$.z)(["resetCheckbox","exportExcel","exportExcelAll"]);var tt=r(91010);const Jt=["dropdownContent"],zt=["dropdownContentFilter"],A=a=>({"disabled-class":a}),Qt=()=>["",null,void 0],Ht=a=>({customerFirstName:a});function Wt(a,o){if(1&a&&t.nrm(0,"app-reusable-forms",15),2&a){const e=t.XpG().$implicit,s=t.XpG();t.Y8G("type",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].type)("control",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].control)("label",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].label)("inputId",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].inputId)("aliasName",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].aliasName)("placeholder",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].placeholder)}}function Kt(a,o){if(1&a&&(t.j41(0,"div"),t.DNE(1,Wt,1,6,"app-reusable-forms",32),t.k0s()),2&a){const e=o.$implicit;t.R7$(),t.Y8G("ngIf","Search"!==e)}}function qt(a,o){if(1&a){const e=t.RV6();t.j41(0,"div",36)(1,"span"),t.EFF(2),t.k0s(),t.EFF(3),t.j41(4,"a",37),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.removeFilter(n))}),t.nrm(5,"img",38),t.k0s()()}if(2&a){const e=t.XpG().$implicit;t.R7$(2),t.SpI("",e.key," : "),t.R7$(),t.SpI(" ",e.value," ")}}function Zt(a,o){if(1&a&&(t.qex(0),t.DNE(1,qt,6,2,"div",35),t.bVm()),2&a){const e=o.$implicit;t.R7$(),t.Y8G("ngIf",!t.lJ4(1,Qt).includes(e.value))}}function te(a,o){if(1&a){const e=t.RV6();t.j41(0,"div",33)(1,"h4"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.DNE(4,Zt,2,2,"ng-container",20),t.nI1(5,"keyvalue"),t.j41(6,"a",34),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.filterReset("clearAll"))}),t.EFF(7),t.nI1(8,"translate"),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(2),t.SpI("",t.bMT(3,4,"common.Filter"),":"),t.R7$(2),t.Y8G("ngForOf",t.bMT(5,6,e.backupFormValue))("ngForTrackBy",e.trackByIndex),t.R7$(3),t.JRh(t.bMT(8,8,"common.ClearFilters"))}}function ee(a,o){1&a&&(t.j41(0,"div"),t.nrm(1,"app-list-skeleton"),t.k0s())}function ne(a,o){if(1&a){const e=t.RV6();t.j41(0,"app-common-table",39),t.bIt("buttonChangeEvent",function(n){t.eBV(e);const i=t.XpG();return t.Njj(i.buttonAction(n))}),t.k0s()}if(2&a){const e=t.XpG(),s=t.sdS(61);t.Y8G("HeadArray",e.dynamicColumnFields)("GridArray",e.orderListArray)("selectAll",e.tableCheckbox)("customTemplate",t.eq3(4,Ht,s))}}function ae(a,o){if(1&a&&(t.j41(0,"p"),t.EFF(1),t.nrm(2,"br"),t.EFF(3),t.k0s()),2&a){const e=o.$implicit;t.R7$(),t.SpI("",e.customerFirstName," "),t.R7$(2),t.SpI(" ",e.shippingCity+", "+e.shippingCountry,"")}}function se(a,o){1&a&&(t.qex(0),t.EFF(1),t.nI1(2,"translate"),t.bVm()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"common.NoDataAvailablefortheFilteredCriteria")," "))}function ie(a,o){1&a&&(t.EFF(0),t.nI1(1,"translate")),2&a&&t.SpI(" ",t.bMT(1,1,"payments.NoArchivedPayment")," ")}function oe(a,o){if(1&a&&(t.j41(0,"div",40)(1,"span"),t.nrm(2,"img",41),t.k0s(),t.j41(3,"h4"),t.DNE(4,se,3,3,"ng-container",42)(5,ie,2,3,"ng-template",null,3,t.C5r),t.k0s()()),2&a){const e=t.sdS(6),s=t.XpG();t.R7$(4),t.Y8G("ngIf",s.formValueExists)("ngIfElse",e)}}function re(a,o){if(1&a){const e=t.RV6();t.j41(0,"app-reusable-pagination",43),t.nI1(1,"async"),t.bIt("pageChange",function(n){t.eBV(e);const i=t.XpG();return t.Njj(i.onPageChange(n))}),t.k0s()}if(2&a){const e=t.XpG();t.Y8G("ngClass",t.eq3(7,A,(null==e.selectedDatas?null:e.selectedDatas.length)>0))("type","numbers")("currentPage",e.currentPage)("pageSize",e.limit)("totalItems",t.bMT(1,5,e.paymentSandbox.archivePaymentListCount$))}}function le(a,o){if(1&a){const e=t.RV6();t.j41(0,"app-bulk-action",44),t.bIt("actionEvent",function(n){t.eBV(e);const i=t.XpG();return t.Njj(i.actionType(n))}),t.k0s()}if(2&a){const e=t.XpG();t.Y8G("count",null==e.selectedDatas?null:e.selectedDatas.length)("bulkList",e.bulkAction)}}let ce=(()=>{class a{constructor(e,s,n,i,c,l,_,F){this.paymentSandbox=e,this.ref=s,this.router=n,this.route=i,this.modal=c,this.fb=l,this.titleService=_,this.PaymentService=F,this.backupData=structuredClone(Z),this.dynamicColumnFields=structuredClone(Z),this.offset=0,this.currentPage=1,this.limit=k.D,this.pageSizeList=k.h,this.queryData={},this.pagination=!0,this.orderListArray=[],this.selectedDatas=[],this.tableCheckbox={isSelectAll:!1},this.bulkAction=Ut,this.backupColumns=structuredClone(wt),this._Object=Object,this.empty=[null,"",void 0],this.alertConfig={},this.dynamicObjControls={},this.backupFormValue={},this.formValueExists=!1,this.subscriptions=new j.yU,this.trackByIndex=ln=>ln}ngOnInit(){this.buildForm(),this.routeSubscribe(),this.titleService.setTitle("Archived Payments")}open(){this.formObjFormGroup.patchValue(this.backupFormValue)}buttonAction(e){switch(e.key){case"threeDotMenu":"Invoice"==e.actionType?this.downloadInvoice(e?.vendorOrderId):"Archive"==e.actionType&&this.makeArchive(e?.vendorPaymentId);break;case"checkBox":this.selectedDatas=e.selectedDatas;break;case"Revoke":this.revoke(e?.vendorArchivePaymentId)}}onPageChange(e){this.limit=e.limit,this.currentPage=Math.floor(e.offset/e.limit)+1,this.getPaymentList()}pageSizeChange(e){this.onPageChange({limit:e.id,offset:0})}applyFilter(){this.offset=0,this.currentPage=1,this.filterValueUpdate(),this.resetAll()}clearSearch(){this.resetAll()}searchItems(){this.resetAll()}removeFilter(e){this.formObjFormGroup.controls[e.key].reset(),this.filterValueUpdate(),this.resetAll()}filterReset(e){"clearAll"==e?this.formObjFormGroup.reset():this.formObjFormGroup.patchValue({"From Date":"","To Date":""}),this.filterValueUpdate(),this.resetAll()}actionType(e){switch(e){case"resetCheckbox":this.resetCheckbox();break;case"exportExcel":this.exportExcel();break;case"exportExcelAll":this.exportExcelAll()}}saveColumns(e){this.backupColumns=structuredClone(e),this.showHideTableColumn()}getQueryParam(){return{limit:this.limit,offset:this.offset,currentPage:this.currentPage,keyword:this.backupFormValue.Search??"",orderId:this.backupFormValue["Order ID"]??"",startDate:this.backupFormValue["From Date"]?C(this.backupFormValue["From Date"]).format("YYYY-MM-DD"):"",endDate:this.backupFormValue["To Date"]?C(this.backupFormValue["To Date"]).format("YYYY-MM-DD"):""}}dropDownClose(e){this.hasOwnProperty(e)&&this[e]?.close()}routeSubscribe(){let e={};this.subscriptions.add(this.route.queryParams.subscribe(s=>{e=s,this.limit=e.limit?Number(e.limit):this.limit,this.offset=e.offset?Number(e.offset):0,this.currentPage=e.currentPage?Number(e.currentPage):1,this.formObjFormGroup.patchValue({"From Date":s.startDate??"","To Date":s.endDate??"",Search:s.keyword??""}),this.filterValueUpdate()})),this.getPaymentList(),this.getPaymentListCount()}showHideTableColumn(){this.dynamicColumnFields.forEach(e=>{e.hasOwnProperty("filterColName")&&(e.checked=this.backupColumns[e.filterColName])})}getPaymentList(){this.offset=(this.currentPage-1)*this.limit;let e=q(this.getQueryParam());e.count=0,this.paymentSandbox.getArchivePaymentList(e),this.subscriptions.add(this.paymentSandbox.archivePaymentList$.subscribe(s=>{this.orderListArray=[],s&&s.length>0&&(this.orderListArray=s,this.orderListArray.forEach(n=>{n.amountWithSymble=n.currencySymbolLeft?n.currencySymbolLeft+n.amount:n.amount,n.commissionAmountWithSymble=n.currencySymbolLeft?n.currencySymbolLeft+n.commissionAmount:n.commissionAmount,n.netAmountWithSymble=n.currencySymbolLeft?n.currencySymbolLeft+n.NetAmount:n.NetAmount}),this.alertConfig=(0,v.RI)("content.ArchivedPayments",v.PO.success),this.reset())})),this.updateQueryParam()}getPaymentListCount(){this.offset=(this.currentPage-1)*this.limit;const e=q(this.getQueryParam());e.count=1,delete e.limit,delete e.offset,delete e.currentPage,this.paymentSandbox.getArchivePaymentListCount(e)}updateQueryParam(){this.router.navigate([],{queryParams:this.getQueryParam(),queryParamsHandling:"merge"})}buildForm(){const e=Bt,s=(0,S.b0)(e);this.formObjFormGroup=this.fb.group(s),Object.keys(e).forEach(n=>{this.dynamicObjControls[n]=(0,S.yE)(e[n],this.formObjFormGroup)}),this.filterValueUpdate()}resetAll(){this.getPaymentList(),this.getPaymentListCount(),this.dropDownClose("dropdownContentFilter"),this.dropDownClose("dropdownContent")}filterValueUpdate(){this.backupFormValue=structuredClone(this.formObjFormGroup?.value),this.backupFormValue["From Date"]&&(this.backupFormValue["From Date"]=C(this.backupFormValue["From Date"]).format("YYYY-MM-DD")),this.backupFormValue["To Date"]&&(this.backupFormValue["To Date"]=C(this.backupFormValue["To Date"]).format("YYYY-MM-DD")),this.formValueExists=Object.values(this.backupFormValue).some(e=>!this.empty.includes(e))}reset(e=!1){this.orderListArray.forEach(s=>s.checked=e),this.selectedDatas=this.orderListArray.filter(s=>s?.checked)}resetCheckbox(){this.reset(),this.tableCheckbox.isSelectAll=!1,this.tableCheckbox={...this.tableCheckbox}}downloadInvoice(e){const s={};s.vendorOrderId=e,this.paymentSandbox.downloadInvoice(s)}exportExcel(){const e={};e.vendorOrderId=this.selectedDatas.map(s=>s.vendorOrderId).toString(),this.paymentSandbox.multiplePaymentExport(e),this.subscriptions.add(this.paymentSandbox.MultiplePaymentExport$.subscribe(s=>{s&&this.resetCheckbox()}))}exportExcelAll(){this.paymentSandbox.multiplePaymentExport({vendorOrderId:[]}),this.subscriptions.add(this.paymentSandbox.MultiplePaymentExport$.subscribe(s=>{s&&this.resetCheckbox()}))}makeArchive(e){this.paymentSandbox.makePaymentArchive({vendorPaymentId:e}),this.subscriptions.add(this.paymentSandbox.makePaymentArchive$.subscribe(n=>{1==n.status&&(this.getPaymentList(),this.getPaymentListCount())}))}revoke(e){this.PaymentService.PaymentRevoke(e).subscribe(s=>{1==s?.status&&(this.getPaymentList(),this.getPaymentListCount())})}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(s){return new(s||a)(t.rXU(O.A),t.rXU(t.gRc),t.rXU(d.Ix),t.rXU(d.nX),t.rXU(u.Bq),t.rXU(p.ze),t.rXU(P.hE),t.rXU(tt.W))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-archived-payments"]],viewQuery:function(s,n){if(1&s&&(t.GBs(Jt,5),t.GBs(zt,5)),2&s){let i;t.mGM(i=t.lsd())&&(n.dropdownContent=i.first),t.mGM(i=t.lsd())&&(n.dropdownContentFilter=i.first)}},decls:68,vars:75,consts:[["dropdownContent","ngbDropdown"],["dropdownContentFilter","ngbDropdown"],["item1",""],["nodatafound",""],[1,"header-list","flexx"],[1,"header-list-rht","ms-auto","flexx",3,"ngClass"],[1,"per-page","flexx"],[1,"ig-row"],["bindLabel","id",3,"change","ngModelChange","items","searchable","clearable","ngModel"],["ngbDropdown","",1,"search-filter",3,"ngClass"],["tabindex","0","ngbDropdownToggle","","id","navbarDropdown2"],["src","assets/imgs/search.svg","alt","Search"],["ngbDropdownMenu","","aria-labelledby","navbarDropdown2",1,"dropdown-menu","dropdown-menu-end"],[1,"",3,"keyup.enter"],[1,"input-group"],[3,"type","control","label","inputId","aliasName","placeholder"],["ngbDropdown","",1,"search-filter",3,"autoClose","ngClass"],["src","assets/imgs/filter.svg","alt","Filter"],["action","",1,"flex"],[1,"filter-content"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-action"],["type","button",1,"button-reg","btn-sm","primary",3,"click"],["type","button",1,"button-reg","btn-sm","trans-btn",3,"click"],[3,"selectedColumns","filterColumns"],["class","filter-result-row flexx",4,"ngIf"],[1,"page-content"],[4,"ngIf"],[3,"HeadArray","GridArray","selectAll","customTemplate","buttonChangeEvent",4,"ngIf"],["class","nodata flexx",4,"ngIf"],["class","pagination flexx",3,"ngClass","type","currentPage","pageSize","totalItems","pageChange",4,"ngIf"],[3,"count","bulkList","actionEvent",4,"ngIf"],[3,"type","control","label","inputId","aliasName","placeholder",4,"ngIf"],[1,"filter-result-row","flexx"],[1,"clear",3,"click"],["class","filter-result-col",4,"ngIf"],[1,"filter-result-col"],[3,"click"],["src","assets/imgs/close-sm.svg","alt","Close"],[3,"buttonChangeEvent","HeadArray","GridArray","selectAll","customTemplate"],[1,"nodata","flexx"],["src","assets/imgs/nodata.svg","alt","No data found"],[4,"ngIf","ngIfElse"],[1,"pagination","flexx",3,"pageChange","ngClass","type","currentPage","pageSize","totalItems"],[3,"actionEvent","count","bulkList"]],template:function(s,n){if(1&s){const i=t.RV6();t.nrm(0,"app-breadcrumbs"),t.j41(1,"header")(2,"div",4)(3,"h1"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"div",5),t.nI1(7,"async"),t.nI1(8,"async"),t.j41(9,"div",6)(10,"p"),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.j41(13,"div",7)(14,"ng-select",8),t.bIt("change",function(l){return t.eBV(i),t.Njj(n.pageSizeChange(l))}),t.mxI("ngModelChange",function(l){return t.eBV(i),t.DH7(n.limit,l)||(n.limit=l),t.Njj(l)}),t.k0s()()(),t.j41(15,"div",9,0),t.nI1(17,"async"),t.nI1(18,"async"),t.j41(19,"button",10),t.nrm(20,"img",11),t.EFF(21),t.nI1(22,"translate"),t.k0s(),t.j41(23,"div",12)(24,"h5"),t.EFF(25),t.nI1(26,"translate"),t.k0s(),t.j41(27,"form",13),t.bIt("keyup.enter",function(){return t.eBV(i),t.Njj(n.applyFilter())}),t.j41(28,"div",14)(29,"div",7),t.nrm(30,"app-reusable-forms",15),t.k0s()()()()(),t.j41(31,"div",16,1),t.nI1(33,"async"),t.nI1(34,"async"),t.j41(35,"button",10),t.nrm(36,"img",17),t.EFF(37),t.nI1(38,"translate"),t.k0s(),t.j41(39,"div",12)(40,"h5"),t.EFF(41),t.nI1(42,"translate"),t.k0s(),t.j41(43,"form",18)(44,"div",19),t.DNE(45,Kt,2,1,"div",20),t.k0s(),t.j41(46,"div",21)(47,"button",22),t.bIt("click",function(){return t.eBV(i),t.Njj(n.applyFilter())}),t.EFF(48),t.nI1(49,"translate"),t.k0s(),t.j41(50,"button",23),t.bIt("click",function(){return t.eBV(i),t.Njj(n.filterReset(""))}),t.EFF(51),t.nI1(52,"translate"),t.k0s()()()()(),t.j41(53,"app-dynamic-columns",24),t.bIt("selectedColumns",function(l){return t.eBV(i),t.Njj(n.saveColumns(l))}),t.k0s()()()(),t.DNE(54,te,9,10,"div",25),t.j41(55,"div",26),t.DNE(56,ee,2,0,"div",27),t.nI1(57,"async"),t.DNE(58,ne,1,6,"app-common-table",28),t.nI1(59,"async"),t.DNE(60,ae,4,2,"ng-template",null,2,t.C5r)(62,oe,7,2,"div",29),t.nI1(63,"async"),t.nI1(64,"async"),t.DNE(65,re,2,9,"app-reusable-pagination",30),t.nI1(66,"async"),t.k0s(),t.DNE(67,le,1,2,"app-bulk-action",31)}if(2&s){let i,c,l;t.R7$(4),t.JRh(t.bMT(5,31,"payments.ArchivedPayments")),t.R7$(2),t.Y8G("ngClass",t.eq3(69,A,t.bMT(7,33,n.paymentSandbox.archivePaymentListLoaded$)&&0==t.bMT(8,35,n.paymentSandbox.archivePaymentList$).length||(null==n.selectedDatas?null:n.selectedDatas.length)>0)),t.R7$(5),t.JRh(t.bMT(12,37,"common.PerPage")),t.R7$(3),t.Y8G("items",n.pageSizeList)("searchable",!1)("clearable",!1),t.R50("ngModel",n.limit),t.R7$(),t.Y8G("ngClass",t.eq3(71,A,t.bMT(17,39,n.paymentSandbox.archivePaymentListLoaded$)&&0==(null==(i=t.bMT(18,41,n.paymentSandbox.archivePaymentList$))?null:i.length))),t.R7$(6),t.SpI("",t.bMT(22,43,"common.Search")," "),t.R7$(4),t.JRh(t.bMT(26,45,"common.Search")),t.R7$(5),t.Y8G("type",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.type)("control",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.control)("label",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.label)("inputId",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.inputId)("aliasName",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.aliasName)("placeholder",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.placeholder),t.R7$(),t.Y8G("autoClose",!1)("ngClass",t.eq3(73,A,t.bMT(33,47,n.paymentSandbox.paymentListLoaded$)&&0==(null==(c=t.bMT(34,49,n.paymentSandbox.paymentList$))?null:c.length))),t.R7$(6),t.SpI("",t.bMT(38,51,"common.Filter")," "),t.R7$(4),t.JRh(t.bMT(42,53,"payments.Filter")),t.R7$(4),t.Y8G("ngForOf",n._Object.keys(n.dynamicObjControls))("ngForTrackBy",n.trackByIndex),t.R7$(3),t.SpI(" ",t.bMT(49,55,"common.apply filters"),""),t.R7$(3),t.JRh(t.bMT(52,57,"common.reset")),t.R7$(2),t.Y8G("filterColumns",n.backupColumns),t.R7$(),t.Y8G("ngIf",n.formValueExists),t.R7$(2),t.Y8G("ngIf",t.bMT(57,59,n.paymentSandbox.archivePaymentListLoading$)),t.R7$(2),t.Y8G("ngIf",(null==n.orderListArray?null:n.orderListArray.length)>0&&!t.bMT(59,61,n.paymentSandbox.archivePaymentListLoading$)),t.R7$(4),t.Y8G("ngIf",0==(null==(l=t.bMT(63,63,n.paymentSandbox.archivePaymentList$))?null:l.length)&&t.bMT(64,65,n.paymentSandbox.archivePaymentListLoaded$)),t.R7$(3),t.Y8G("ngIf",t.bMT(66,67,n.paymentSandbox.archivePaymentListCount$)>0),t.R7$(2),t.Y8G("ngIf",(null==n.selectedDatas?null:n.selectedDatas.length)>0)}},dependencies:[m.YU,m.Sq,m.bT,p.qT,p.BC,p.cb,N.m,R.L,M.e,V.$,L.y,Y.V,w.S,p.vS,p.cV,u.tg,u.do,u.U0,I.vr,m.Jj,m.lG,T.D9],styles:[".loading[_ngcontent-%COMP%]{margin-top:5%;display:flex;justify-content:center}.disabled-class[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"]})}}return a})();const me={"Sales.payments.Product":!0,"Sales.stockupdate.SKU":!0,"Sales.payments.Total Sold":!0,"Sales.payments.revenue":!0};function et(a){for(const o in a)a.hasOwnProperty(o)&&(null==a[o]||""===a[o])&&delete a[o];return a}const nt=[{displayName:"",id:"id",type:"checkBox",checked:!0,optionalFilterName:"Checkbox",isEnableSelectall:!0,customStyle:{trow:{class:"tableAlign"},tbody:{class:"tableAlign"}}},{displayName:"Sales.payments.Product",id:"name",type:"template",checked:!0,filterColName:"Sales.payments.Product"},{displayName:"Sales.stockupdate.SKU",id:"sku",type:"default",checked:!0,filterColName:"Sales.stockupdate.SKU"},{displayName:"Sales.payments.Total Sold",id:"totalSold",type:"default",checked:!0,filterColName:"Sales.payments.Total Sold",customStyle:{trow:{width:"20%",height:"3%",class:"text-center"},tbody:{class:"text-center"}}},{displayName:"Sales.payments.revenue",id:"totalRevenue",type:"template",checked:!0,filterColName:"Sales.payments.revenue",customStyle:{trow:{class:"text-end price"},tbody:{class:"text-end price"}}}],pe={productName:{name:"product Name",label:"payments.ProductTitle",aliasName:"",validatiors:[],type:"text",placeholder:"payments.ProductTitle"},sku:{name:"sku",label:"payments.Sku",validatiors:[],type:"text",placeholder:"payments.Sku"},Search:{label:"",name:"Search",validatiors:[],type:"text",placeholder:"Earnings.Search"}},de=(0,$.z)(["resetCheckbox","exportExcel","exportExcelAll"]);var h=r(68556),b=r(34514),y=r(36223);const g=a=>a.earning,he=(0,b.Mz)(g,y.fx),be=(0,b.Mz)(g,y.V5),ye=(0,b.Mz)(g,y.wF),ge=(0,b.Mz)(g,y.CG),fe=(0,b.Mz)(g,y.e0),_e=(0,b.Mz)(g,y.Ud),Ce=(0,b.Mz)(g,y.FQ),Se=(0,b.Mz)(g,y.PJ),ve=(0,b.Mz)(g,y.j),ke=(0,b.Mz)(g,y.JQ),Ee=(0,b.Mz)(g,y.Ee),Fe=(0,b.Mz)(g,y.k);var Ie=r(87010);let at=(()=>{class a{constructor(e,s){this.router=e,this.appState$=s,this.GetEarning$=this.appState$.select(he),this.GetEarningLoading$=this.appState$.select(be),this.GetEarningLoaded$=this.appState$.select(ye),this.GetEarningFailed$=this.appState$.select(ge),this.GetEarningCount$=this.appState$.select(fe),this.GetEarningCountLoading$=this.appState$.select(_e),this.GetEarningCountLoaded$=this.appState$.select(Ce),this.GetEarningCountFailed$=this.appState$.select(Se),this.GetEarningExport$=this.appState$.select(ve),this.GetEarningExportLoading$=this.appState$.select(ke),this.GetEarningExportLoaded$=this.appState$.select(Ee),this.GetEarningExportFailed$=this.appState$.select(Fe)}GetEarning(e){this.appState$.dispatch(new h.RJ(e))}GetEarningCount(e){this.appState$.dispatch(new h.EE(e))}GetEarningExport(e){this.appState$.dispatch(new h.V8(e))}static{this.\u0275fac=function(s){return new(s||a)(t.KVO(d.Ix),t.KVO(Ie.il))}}static{this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac})}}return a})();var je=r(14823),Te=r(74958);const xe=["dropdownContent"],Ae=["dropdownContentFilter"],D=a=>({"disabled-class":a}),De=()=>["",null,void 0],Ge=(a,o)=>({totalRevenue:a,name:o});function $e(a,o){if(1&a&&t.nrm(0,"app-reusable-forms",17),2&a){const e=t.XpG().$implicit,s=t.XpG();t.Y8G("type",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].type)("control",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].control)("label",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].label)("inputId",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].inputId)("aliasName",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].aliasName)("placeholder",null==s.dynamicObjControls[e]?null:s.dynamicObjControls[e].placeholder)}}function Oe(a,o){if(1&a&&(t.j41(0,"div"),t.DNE(1,$e,1,6,"app-reusable-forms",32),t.k0s()),2&a){const e=o.$implicit;t.R7$(),t.Y8G("ngIf","Search"!==e)}}function Pe(a,o){if(1&a){const e=t.RV6();t.j41(0,"div",36)(1,"span"),t.EFF(2),t.k0s(),t.EFF(3),t.j41(4,"a",37),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.removeFilter(n))}),t.nrm(5,"img",38),t.k0s()()}if(2&a){const e=t.XpG().$implicit;t.R7$(2),t.SpI("",e.key," : "),t.R7$(),t.SpI(" ",e.value," ")}}function Ne(a,o){if(1&a&&(t.qex(0),t.DNE(1,Pe,6,2,"div",35),t.bVm()),2&a){const e=o.$implicit;t.R7$(),t.Y8G("ngIf",!t.lJ4(1,De).includes(e.value))}}function Re(a,o){if(1&a){const e=t.RV6();t.j41(0,"div",33)(1,"h4"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.DNE(4,Ne,2,2,"ng-container",21),t.nI1(5,"keyvalue"),t.j41(6,"a",34),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.filterReset("clearAll"))}),t.EFF(7),t.nI1(8,"translate"),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(2),t.SpI("",t.bMT(3,4,"common.Filter"),":"),t.R7$(2),t.Y8G("ngForOf",t.bMT(5,6,e.backupFormValue))("ngForTrackBy",e.trackByIndex),t.R7$(3),t.JRh(t.bMT(8,8,"common.ClearFilters"))}}function Me(a,o){1&a&&(t.j41(0,"div"),t.nrm(1,"app-list-skeleton"),t.k0s())}function Ve(a,o){if(1&a){const e=t.RV6();t.j41(0,"app-common-table",39),t.bIt("buttonChangeEvent",function(n){t.eBV(e);const i=t.XpG();return t.Njj(i.buttonAction(n))}),t.k0s()}if(2&a){const e=t.XpG(),s=t.sdS(62),n=t.sdS(64);t.Y8G("HeadArray",e.dynamicColumnFields)("GridArray",e.paymentListArray)("selectAll",e.tableCheckbox)("customTemplate",t.l_i(4,Ge,s,n))}}function Le(a,o){if(1&a&&(t.j41(0,"p"),t.EFF(1),t.nI1(2,"currencysymbol"),t.nI1(3,"currencysymbol"),t.k0s()),2&a){const e=o.$implicit;t.R7$(),t.JRh(0!==(null==e?null:e.totalRevenue)?t.bMT(2,1,null==e?null:e.totalRevenue):t.bMT(3,3,"0.00"))}}function Ye(a,o){if(1&a&&(t.j41(0,"span",43)(1,"a",44),t.EFF(2),t.k0s()()),2&a){const e=t.XpG().$implicit;t.FS9("matTooltip",e.name),t.R7$(2),t.SpI("",e.truncatedText,"...")}}function we(a,o){if(1&a&&(t.j41(0,"a",45),t.EFF(1),t.k0s()),2&a){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.name," ")}}function Be(a,o){if(1&a&&(t.j41(0,"div",40),t.DNE(1,Ye,3,2,"span",41)(2,we,2,1,"ng-template",42,4,t.C5r),t.k0s()),2&a){const e=o.$implicit,s=t.sdS(3);t.R7$(),t.Y8G("ngIf",(null==e.name?null:e.name.length)>100)("ngIfElse",s)}}function Xe(a,o){1&a&&(t.qex(0),t.EFF(1),t.nI1(2,"translate"),t.bVm()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"common.NoDataAvailablefortheFilteredCriteria")," "))}function Ue(a,o){1&a&&(t.EFF(0),t.nI1(1,"translate")),2&a&&t.SpI(" ",t.bMT(1,1,"payments.NoEarningsareadded")," ")}function Je(a,o){if(1&a&&(t.j41(0,"div",46)(1,"span"),t.nrm(2,"img",47),t.k0s(),t.j41(3,"h4"),t.DNE(4,Xe,3,3,"ng-container",48)(5,Ue,2,3,"ng-template",null,5,t.C5r),t.k0s()()),2&a){const e=t.sdS(6),s=t.XpG();t.R7$(4),t.Y8G("ngIf",s.formValueExists)("ngIfElse",e)}}function ze(a,o){if(1&a){const e=t.RV6();t.j41(0,"app-reusable-pagination",50),t.bIt("pageChange",function(n){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(n))}),t.k0s()}if(2&a){const e=t.XpG(2);t.Y8G("ngClass",t.eq3(5,D,(null==e.selectedDatas?null:e.selectedDatas.length)>0))("type","numbers")("currentPage",e.currentPage)("pageSize",e.limit)("totalItems",e.count)}}function Qe(a,o){if(1&a&&(t.qex(0),t.DNE(1,ze,1,7,"app-reusable-pagination",49),t.bVm()),2&a){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.count>0)}}function He(a,o){if(1&a){const e=t.RV6();t.j41(0,"app-bulk-action",51),t.bIt("actionEvent",function(n){t.eBV(e);const i=t.XpG();return t.Njj(i.actionType(n))}),t.k0s()}if(2&a){const e=t.XpG();t.Y8G("count",null==e.selectedDatas?null:e.selectedDatas.length)("bulkList",e.bulkAction)}}let We=(()=>{class a{constructor(e,s,n,i,c,l,_){this.EarningSandbox=e,this.ref=s,this.router=n,this.route=i,this.modal=c,this.fb=l,this.titleService=_,this.backupData=structuredClone(nt),this.dynamicColumnFields=structuredClone(nt),this.currentPage=1,this.limit=k.D,this.offset=0,this.pageSizeList=k.h,this.queryData={},this.pagination=!0,this.paymentListArray=[],this.selectedDatas=[],this.tableCheckbox={isSelectAll:!1},this.bulkAction=de,this.backupColumns=structuredClone(me),this._Object=Object,this.empty=[null,"",void 0],this.alertConfig={},this.dynamicObjControls={},this.backupFormValue={},this.formValueExists=!1,this.subscriptions=new j.yU,this.trackByIndex=F=>F,this.currency=JSON.parse(localStorage.getItem("adminCurrency")),this.titleService.setTitle("Earnings")}ngOnInit(){this.buildForm(),this.routeSubscribe()}open(){this.formObjFormGroup.patchValue(this.backupFormValue)}buttonAction(e){switch(e.key){case"threeDotMenu":break;case"checkBox":this.selectedDatas=e.selectedDatas}}onPageChange(e){this.limit=e.limit,this.currentPage=Math.floor(e.offset/e.limit)+1,this.EarningApiList()}pageSizeChange(e){this.onPageChange({limit:e.id,offset:0})}applyFilter(){this.offset=0,this.currentPage=1,this.filterValueUpdate(),this.resetAll()}clearSearch(){this.resetAll()}searchItems(){this.resetAll()}removeFilter(e){this.formObjFormGroup.controls[e.key].reset(),this.filterValueUpdate(),this.resetAll()}filterReset(e){"clearAll"==e?this.formObjFormGroup.reset():this.formObjFormGroup.patchValue({"product Name":"",sku:""}),this.filterValueUpdate(),this.resetAll()}actionType(e){switch(e){case"resetCheckbox":this.resetCheckbox();break;case"exportExcel":this.exportExcel();break;case"exportExcelAll":this.exportExcelAll()}}saveColumns(e){this.backupColumns=structuredClone(e),this.showHideTableColumn()}getQueryParam(){return{limit:this.limit,offset:this.offset,currentPage:this.currentPage,keyword:this.backupFormValue.Search??"",productName:this.backupFormValue["product Name"]??"",sku:this.backupFormValue.sku??""}}dropDownClose(e){this.hasOwnProperty(e)&&this[e]?.close()}routeSubscribe(){let e={};this.subscriptions.add(this.route.queryParams.subscribe(s=>{e=s,this.limit=e.limit?Number(e.limit):this.limit,this.offset=e.offset?Number(e.offset):0,this.currentPage=e.currentPage?Number(e.currentPage):1,this.formObjFormGroup.patchValue({"product Name":s.productName??"",sku:s.sku??"",Search:s.keyword??""}),this.filterValueUpdate()})),this.EarningApiList(),this.EarningApiCount()}showHideTableColumn(){this.dynamicColumnFields.forEach(e=>{e.hasOwnProperty("filterColName")&&(e.checked=this.backupColumns[e.filterColName])})}EarningApiList(){this.offset=(this.currentPage-1)*this.limit;let e=et(this.getQueryParam());e.count=0,this.EarningSandbox.GetEarning(e),this.subscriptions.add(this.EarningSandbox.GetEarning$.subscribe(s=>{this.paymentListArray=[],s&&Object.keys(s).length>0&&(this.paymentListArray=s.data,this.paymentListArray.forEach(n=>{n.truncatedText=n.name?.length>100?n.name.slice(0,100):n.name,n.totalSold=n.soldCount?n.soldCount:"0"}),this.alertConfig=(0,v.RI)("content.Earnings",v.PO.success,""),this.reset())})),this.updateQueryParam()}EarningApiCount(){this.offset=(this.currentPage-1)*this.limit;const e=et(this.getQueryParam());e.count=1,delete e.limit,delete e.offset,this.EarningSandbox.GetEarningCount(e),this.subscriptions.add(this.EarningSandbox.GetEarningCount$.subscribe(s=>{1==s.status&&(this.count=s.data)}))}updateQueryParam(){this.router.navigate([],{queryParams:this.getQueryParam(),queryParamsHandling:"merge"})}buildForm(){const e=pe,s=(0,S.b0)(e);this.formObjFormGroup=this.fb.group(s),Object.keys(e).forEach(n=>{this.dynamicObjControls[n]=(0,S.yE)(e[n],this.formObjFormGroup)}),this.filterValueUpdate()}resetAll(){this.EarningApiList(),this.EarningApiCount(),this.dropDownClose("dropdownContentFilter"),this.dropDownClose("dropdownContent")}filterValueUpdate(){this.backupFormValue=structuredClone(this.formObjFormGroup?.value),this.formValueExists=Object.values(this.backupFormValue).some(e=>!this.empty.includes(e))}reset(e=!1){this.paymentListArray.forEach(s=>s.checked=e),this.selectedDatas=this.paymentListArray.filter(s=>s?.checked)}resetCheckbox(){this.reset(),this.tableCheckbox.isSelectAll=!1,this.tableCheckbox={...this.tableCheckbox}}exportExcel(){const e={};e.productId=this.selectedDatas.map(s=>s.productId).toString(),this.EarningSandbox.GetEarningExport(e),this.subscriptions.add(this.EarningSandbox.GetEarningExport$.subscribe(s=>{s&&this.resetCheckbox()}))}exportExcelAll(){this.EarningSandbox.GetEarningExport({productId:[]}),this.subscriptions.add(this.EarningSandbox.GetEarningExport$.subscribe(s=>{s&&this.resetCheckbox()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(s){return new(s||a)(t.rXU(at),t.rXU(t.gRc),t.rXU(d.Ix),t.rXU(d.nX),t.rXU(u.Bq),t.rXU(p.ze),t.rXU(P.hE))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-earning"]],viewQuery:function(s,n){if(1&s&&(t.GBs(xe,5),t.GBs(Ae,5)),2&s){let i;t.mGM(i=t.lsd())&&(n.dropdownContent=i.first),t.mGM(i=t.lsd())&&(n.dropdownContentFilter=i.first)}},decls:70,vars:73,consts:[["dropdownContent","ngbDropdown"],["dropdownContentFilter","ngbDropdown"],["itemVal",""],["itemTemplateRefName",""],["fullTextDisplay",""],["nodatafound",""],[1,"header-list","flexx"],[1,"header-list-rht","ms-auto","flexx",3,"ngClass"],[1,"per-page","flexx"],[1,"ig-row"],["bindLabel","id",3,"change","ngModelChange","items","searchable","clearable","ngModel"],["ngbDropdown","",1,"search-filter",3,"ngClass"],["tabindex","0","ngbDropdownToggle","","id","navbarDropdown2"],["src","assets/imgs/search.svg","alt","Search"],["ngbDropdownMenu","","aria-labelledby","navbarDropdown2",1,"dropdown-menu","dropdown-menu-end"],[1,"",3,"keyup.enter"],[1,"input-group"],[3,"type","control","label","inputId","aliasName","placeholder"],["src","assets/imgs/filter.svg","alt","Filter"],["action","",1,"flex"],[1,"filter-content"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-action"],["type","button",1,"button-reg","btn-sm","primary",3,"click"],["type","button",1,"button-reg","btn-sm","trans-btn",3,"click"],[3,"selectedColumns","filterColumns"],["class","filter-result-row flexx",4,"ngIf"],[1,"page-content"],[4,"ngIf"],[3,"HeadArray","GridArray","selectAll","customTemplate","buttonChangeEvent",4,"ngIf"],["class","nodata flexx",4,"ngIf"],[3,"count","bulkList","actionEvent",4,"ngIf"],[3,"type","control","label","inputId","aliasName","placeholder",4,"ngIf"],[1,"filter-result-row","flexx"],[1,"clear",3,"click"],["class","filter-result-col",4,"ngIf"],[1,"filter-result-col"],[3,"click"],["src","assets/imgs/close-sm.svg","alt","Close"],[3,"buttonChangeEvent","HeadArray","GridArray","selectAll","customTemplate"],[1,"d-flex","align-items-center","product-details"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf","ngIfElse"],[2,"pointer-events","none"],["matTooltipPosition","above",3,"matTooltip"],["href","javascript:void(0)"],["href","javascript:void(0)",2,"pointer-events","none"],[1,"nodata","flexx"],["src","assets/imgs/nodata.svg","alt","No data found"],[4,"ngIf","ngIfElse"],["class","pagination flexx",3,"ngClass","type","currentPage","pageSize","totalItems","pageChange",4,"ngIf"],[1,"pagination","flexx",3,"pageChange","ngClass","type","currentPage","pageSize","totalItems"],[3,"actionEvent","count","bulkList"]],template:function(s,n){if(1&s){const i=t.RV6();t.nrm(0,"app-breadcrumbs"),t.j41(1,"header")(2,"div",6)(3,"h1"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.EFF(6),t.nI1(7,"async"),t.j41(8,"div",7),t.nI1(9,"async"),t.j41(10,"div",8)(11,"p"),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.j41(14,"div",9)(15,"ng-select",10),t.bIt("change",function(l){return t.eBV(i),t.Njj(n.pageSizeChange(l))}),t.mxI("ngModelChange",function(l){return t.eBV(i),t.DH7(n.limit,l)||(n.limit=l),t.Njj(l)}),t.k0s()()(),t.j41(16,"div",11,0),t.nI1(18,"async"),t.nI1(19,"async"),t.j41(20,"button",12),t.nrm(21,"img",13),t.EFF(22),t.nI1(23,"translate"),t.k0s(),t.j41(24,"div",14)(25,"h5"),t.EFF(26),t.nI1(27,"translate"),t.k0s(),t.j41(28,"form",15),t.bIt("keyup.enter",function(){return t.eBV(i),t.Njj(n.applyFilter())}),t.j41(29,"div",16)(30,"div",9),t.nrm(31,"app-reusable-forms",17),t.k0s()()()()(),t.j41(32,"div",11,1),t.nI1(34,"async"),t.nI1(35,"async"),t.j41(36,"button",12),t.nrm(37,"img",18),t.EFF(38),t.nI1(39,"translate"),t.k0s(),t.j41(40,"div",14)(41,"h5"),t.EFF(42),t.nI1(43,"translate"),t.k0s(),t.j41(44,"form",19)(45,"div",20),t.DNE(46,Oe,2,1,"div",21),t.k0s(),t.j41(47,"div",22)(48,"button",23),t.bIt("click",function(){return t.eBV(i),t.Njj(n.applyFilter())}),t.EFF(49),t.nI1(50,"translate"),t.k0s(),t.j41(51,"button",24),t.bIt("click",function(){return t.eBV(i),t.Njj(n.filterReset(""))}),t.EFF(52),t.nI1(53,"translate"),t.k0s()()()()(),t.j41(54,"app-dynamic-columns",25),t.bIt("selectedColumns",function(l){return t.eBV(i),t.Njj(n.saveColumns(l))}),t.k0s()()()(),t.DNE(55,Re,9,10,"div",26),t.j41(56,"div",27),t.DNE(57,Me,2,0,"div",28),t.nI1(58,"async"),t.DNE(59,Ve,1,7,"app-common-table",29),t.nI1(60,"async"),t.DNE(61,Le,4,5,"ng-template",null,2,t.C5r)(63,Be,4,2,"ng-template",null,3,t.C5r)(65,Je,7,2,"div",30),t.nI1(66,"async"),t.DNE(67,Qe,2,1,"ng-container",28),t.nI1(68,"async"),t.k0s(),t.DNE(69,He,1,2,"app-bulk-action",31)}if(2&s){let i,c,l;t.R7$(4),t.JRh(t.bMT(5,31,"payments.EarningsList")),t.R7$(2),t.SpI(" ",null==(i=t.bMT(7,33,n.EarningSandbox.GetEarning$))?null:i.length," "),t.R7$(2),t.Y8G("ngClass",t.eq3(67,D,t.bMT(9,35,n.EarningSandbox.GetEarningLoaded$)&&0==(null==n.paymentListArray?null:n.paymentListArray.length)||(null==n.selectedDatas?null:n.selectedDatas.length)>0)),t.R7$(4),t.JRh(t.bMT(13,37,"common.PerPage")),t.R7$(3),t.Y8G("items",n.pageSizeList)("searchable",!1)("clearable",!1),t.R50("ngModel",n.limit),t.R7$(),t.Y8G("ngClass",t.eq3(69,D,t.bMT(18,39,n.EarningSandbox.GetEarningLoaded$)&&0==(null==(c=t.bMT(19,41,n.EarningSandbox.GetEarning$))?null:c.length))),t.R7$(6),t.SpI("",t.bMT(23,43,"common.Search")," "),t.R7$(4),t.JRh(t.bMT(27,45,"payments.Search")),t.R7$(5),t.Y8G("type",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.type)("control",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.control)("label",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.label)("inputId",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.inputId)("aliasName",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.aliasName)("placeholder",null==n.dynamicObjControls.Search?null:n.dynamicObjControls.Search.placeholder),t.R7$(),t.Y8G("ngClass",t.eq3(71,D,t.bMT(34,47,n.EarningSandbox.GetEarningLoaded$)&&0==(null==(l=t.bMT(35,49,n.EarningSandbox.GetEarning$))?null:l.length))),t.R7$(6),t.SpI("",t.bMT(39,51,"common.Filter")," "),t.R7$(4),t.JRh(t.bMT(43,53,"payments.Filter")),t.R7$(4),t.Y8G("ngForOf",n._Object.keys(n.dynamicObjControls))("ngForTrackBy",n.trackByIndex),t.R7$(3),t.SpI(" ",t.bMT(50,55,"payments.ApplyFilter"),""),t.R7$(3),t.SpI(" ",t.bMT(53,57,"payments.ResetFilter"),""),t.R7$(2),t.Y8G("filterColumns",n.backupColumns),t.R7$(),t.Y8G("ngIf",n.formValueExists),t.R7$(2),t.Y8G("ngIf",t.bMT(58,59,n.EarningSandbox.GetEarningLoading$)),t.R7$(2),t.Y8G("ngIf",(null==n.paymentListArray?null:n.paymentListArray.length)>0&&!t.bMT(60,61,n.EarningSandbox.GetEarningLoading$)),t.R7$(6),t.Y8G("ngIf",t.bMT(66,63,n.EarningSandbox.GetEarningLoaded$)&&0==(null==n.paymentListArray?null:n.paymentListArray.length)),t.R7$(2),t.Y8G("ngIf",t.bMT(68,65,n.EarningSandbox.GetEarningLoaded$)&&(null==n.paymentListArray?null:n.paymentListArray.length)>0),t.R7$(2),t.Y8G("ngIf",(null==n.selectedDatas?null:n.selectedDatas.length)>0)}},dependencies:[m.YU,m.Sq,m.bT,p.qT,p.BC,p.cb,N.m,je.oV,R.L,M.e,V.$,L.y,Y.V,w.S,p.vS,p.cV,u.tg,u.do,u.U0,I.vr,m.Jj,m.lG,Te.G,T.D9],styles:[".loading[_ngcontent-%COMP%]{margin-top:5%;display:flex;justify-content:center}.disabled-class[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"]})}}return a})();var U=r(63644);const Ke=[{path:"",component:bt,children:[{path:"",redirectTo:"settlements",pathMatch:"full"},{path:"settlements",component:Yt,canActivate:[U.q],data:{title:"settlements",urls:[{title:"breadcrumbs.Payments",url:""},{title:"Payouts List",url:""}]}},{path:"archived-payments",component:ce,canActivate:[U.q],data:{title:"archived-payments",urls:[{title:"breadcrumbs.Payments",url:""},{title:"Archived Settlements List",url:""}]}},{path:"earning",component:We,canActivate:[U.q],data:{title:"earning",urls:[{title:"breadcrumbs.Payments",url:""},{title:"Earning List",url:""}]}}]}];let qe=(()=>{class a{static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(Ke),d.iI]})}}return a})();var Ze=r(36397),J=r(7673),E=r(96354),G=r(25558),tn=r(88141),z=r(99437),en=r(2578),nn=r(79754),an=r(21626);let st=(()=>{class a extends nn.j{constructor(){super(...arguments),this.base=this.getBaseUrl()}GetEarning(e){return this.http.get(this.base+"/vendor-sales/vendor-earning-list",{params:e})}GetEarningCount(e){return this.http.get(this.base+"/vendor-sales/vendor-earning-list",{params:e})}GetEarningExport(e){const s={};if(e){s.params=new an.Nl;for(const n in e)n&&(s.params=s.params.set(n,e[n]))}return s.responseType="arraybuffer",this.http.get(this.base+"/vendor-sales/product-earning-export",s)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=t.xGo(a)))(n||a)}})()}static{this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac})}}return a})();var sn=r(48256);let on=(()=>{class a{constructor(e,s,n,i){this.actions$=e,this.platformId=s,this.authApi=n,this.toastr=i,this.GetEarning$=(0,f.EH)(()=>this.actions$.pipe((0,f.gp)(h.Q3.EARNING_LIST),(0,E.T)(c=>c.payload),(0,G.n)(c=>this.authApi.GetEarning(c).pipe((0,E.T)(l=>new h.Sx(l)),(0,z.W)(l=>(0,J.of)(new h.by(l))))))),this.GetEarningCount$=(0,f.EH)(()=>this.actions$.pipe((0,f.gp)(h.Q3.EARNING_COUNT),(0,E.T)(c=>c.payload),(0,G.n)(c=>this.authApi.GetEarningCount(c).pipe((0,E.T)(l=>new h.p_(l)),(0,z.W)(l=>(0,J.of)(new h.Eo(l))))))),this.GetEarningExport$=(0,f.EH)(()=>this.actions$.pipe((0,f.gp)(h.Q3.EARNING_EXPORT),(0,E.T)(c=>c.payload),(0,G.n)(c=>this.authApi.GetEarningExport(c).pipe((0,tn.M)(l=>{const _="product_list_"+Date.now()+".xlsx",F=new Blob([l],{type:"text/xlsx"});(0,en.saveAs)(F,_)}),(0,G.n)(l=>[new h.AT(l)]),(0,z.W)(l=>(0,J.of)(new h.Tt(l)))))))}static{this.\u0275fac=function(s){return new(s||a)(t.KVO(f.En),t.KVO(t.Agw),t.KVO(st),t.KVO(sn.tw))}}static{this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac})}}return a})();const it={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"DD/MM/YYYY",monthYearA11yLabel:"MMMM YYYY"}};let rn=(()=>{class a{static{this.\u0275fac=function(s){return new(s||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({providers:[O.A,tt.W,st,at,{provide:H.Ju,useValue:"en-GB"},{provide:H.de,useValue:it}],imports:[m.MD,qe,p.X1,ot.Gg,p.YN,f.Vm.forFeature([Ze.W,on]),u.UN,I.MQ]})}}return a})()}}]);